{"mappings":"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","sources":["src/index.js","src/baseElements/KrStateElement/KrStateElement.js","src/baseElements/KrSelectElement/KrSelectElement.js","src/baseElements/KrBaseElement/KrBaseElement.js","src/baseElements/KrSelectElement/template/template.js","src/baseElements/KrThingElement/KrThingElement.js","src/baseElements/KrThingElement/template/template.js","src/baseElements/KrThingsElement/KrThingsElement.js","src/baseElements/KrThingsElement/template/template.js","src/baseElements/KrPropertyElement/KrPropertyElement.js","src/baseElements/KrPropertyElement/template/template.js","src/baseElements/KrValueElement/KrValueElement.js","src/baseElements/KrValueElement/template/template.js","src/baseElements/KrListItemElement/KrListItemElement.js","src/baseElements/KrListItemElement/template/template.js","src/action/KrActionElement/KrActionElement.js","src/action/KrActionElement/template/template.js","src/action/KrActionMenuElement/KrActionMenuElement.js","src/action/KrActionMenuElement/template/template.js","src/action/KrActionStatusElement/KrActionStatusElement.js","src/widgets/table/KrTable/KrTable.js","src/widgets/table/KrTable/template/table.js","src/widgets/table/KrTableProperty/KrTableProperty.js","src/widgets/table/KrTableProperty/template/tableProperty.js","src/widgets/table/KrTableValue/KrTableValue.js","src/widgets/table/KrTableValue/template/tablevalue.js","src/KrAvatar/KrAvatar.js","src/KrAvatar/template/template.js","src/widgets/KrImage/KrImage.js","src/widgets/KrImage/template/template.js","src/form/KrFormSm/KrFormSm.js","src/form/KrFormSm/template/formSm.js","src/form/KrFormInput/KrFormInput.js","src/form/KrFormInput/template/formInput.js","src/form/KrFormInputValue/KrFormInputValue.js","src/widgets/KrCard/KrCard.js","src/widgets/KrCard/template/template.js","src/widgets/KrHeader/KrHeader.js","src/widgets/KrHeader/template/template.js","src/widgets/KrFooter/KrFooter.js","src/widgets/KrFooter/template/template.js","src/widgets/KrSidebar/KrSidebar.js","src/widgets/KrSidebar/template/template.js","src/widgets/KrArticleContent/KrArticleContent.js","src/widgets/KrArticleContent/template/template.js","src/widgets/KrArticleToC/KrArticleToC.js","src/widgets/KrArticleToC/template/template.js","src/widgets/KrArticle/KrArticle.js","src/widgets/KrArticle/template/template.js","src/editor/KrEditor/KrEditor.js","src/editor/KrEditor/template/template.js","src/editor/KrEditorLine/KrEditorLine.js","src/editor/KrEditorLine/template/template.js","src/extractFromText/extractFromText.js","src/editor/KrLinearThing/KrLinearThing.js","src/editor/KrLinearThing/template/template.js","src/widgets/KrSimple/KrSimple.js","src/widgets/KrSimple/template/template.js"],"sourcesContent":["import { KrStateElement } from './baseElements/KrStateElement/KrStateElement.js'\nimport { KrSelectElement } from './baseElements/KrSelectElement/KrSelectElement.js'\n\nimport { KrThingElement } from './baseElements/KrThingElement/KrThingElement.js'\nimport { KrThingsElement } from './baseElements/KrThingsElement/KrThingsElement.js'\nimport { KrPropertyElement } from './baseElements/KrPropertyElement/KrPropertyElement.js'\nimport { KrValueElement } from './baseElements/KrValueElement/KrValueElement.js'\nimport { KrListItemElement } from './baseElements/KrListItemElement/KrListItemElement.js'\n\nimport { KrActionElement } from './action/KrActionElement/KrActionElement.js'\nimport { KrActionMenuElement } from './action/KrActionMenuElement/KrActionMenuElement.js'\nimport { KrActionStatusElement } from './action/KrActionStatusElement/KrActionStatusElement.js'\n\n\nimport { KrTable } from './widgets/table/KrTable/KrTable.js'\nimport { KrTablePropertyElement } from './widgets/table/KrTableProperty/KrTableProperty.js'\nimport { KrTableValueElement } from './widgets/table/KrTableValue/KrTableValue.js'\n\n\nimport { KrAvatar } from './KrAvatar/KrAvatar.js'\n\nimport { KrImage, KrImageXs, KrImageSm, KrImageMd, KrImageLg, KrImageAvatar } from './widgets/KrImage/KrImage.js'\n\nimport { KrFormSm } from './form/KrFormSm/KrFormSm.js'\nimport { KrFormInput } from './form/KrFormInput/KrFormInput.js'\nimport { KrFormInputValue } from './form/KrFormInputValue/KrFormInputValue.js'\n\n\nimport { KrCardElement } from './widgets/KrCard/KrCard.js'\n\nimport { KrHeaderElement } from './widgets/KrHeader/KrHeader.js'\nimport { KrFooterElement } from './widgets/KrFooter/KrFooter.js'\nimport { KrSidebarElement } from './widgets/KrSidebar/KrSidebar.js'\n\nimport { KrArticleContentElement } from './widgets/KrArticleContent/KrArticleContent.js'\nimport { KrArticleToCElement } from './widgets/KrArticleToC/KrArticleToC.js'\nimport { KrArticleElement } from './widgets/KrArticle/KrArticle.js'\n\nimport { KrEditor } from './editor/KrEditor/KrEditor.js'\nimport { KrEditorLine} from './editor/KrEditorLine/KrEditorLine.js'\nimport { KrLinearThing} from './editor/KrLinearThing/KrLinearThing.js'\nimport { KrSimple} from './widgets/KrSimple/KrSimple.js'\n\n\nexport var KrElements = {\n\n    KrState: KrStateElement,\n    KrThing: KrThingElement,\n    KrThings: KrThingsElement,\n    KrProperty: KrPropertyElement,\n    KrValue: KrValueElement,\n    KrListItem: KrListItemElement,\n    KrAction: KrActionElement,\n    KrActionMenu: KrActionMenuElement,\n    KrActionStatus: KrActionStatusElement,\n    KrTable: KrTable,\n    KrAvatar: KrAvatar,\n    KrImage: KrImage,\n    KrImageXs: KrImageXs,\n    KrImageSm: KrImageSm,\n    KrImageMd: KrImageMd, \n    KrImageLg: KrImageLg,\n    KrImageAvatar: KrImageAvatar,\n    KrFormInput: KrFormInput,\n    KrFormSm: KrFormSm,\n    KrCardElement: KrCardElement,\n    KrHeaderElement: KrHeaderElement,\n    KrFooterElement: KrFooterElement,\n    KrSidebarElement: KrSidebarElement,\n    KrArticleElement: KrArticleElement,\n    KrArticleToCElement: KrArticleToCElement,\n    KrArticleContentElement: KrArticleContentElement,\n    KrSelectElement: KrSelectElement,\n    KrEditor: KrEditor,\n    KrEditorLine: KrEditorLine\n    \n    \n}\n\n\n\n\n","\nimport { KrThing, KrThings, KrDb } from 'krakenthing';\n\n\nexport class KrStateElement extends HTMLElement {\n    /**\n     * State manager\n     * attributes:\n     * -\n     * methods:\n     * - getThing:\n     * - setThing:\n     * \n     */\n\n    constructor() {\n        super();\n\n        this._db = new KrDb('https://data.krknapi.com/api/test7')\n        this.record_type = \"ItemList\"\n        this.record_id = String(crypto.randomUUID())\n        this.record_ref = { \"@type\": this.record_type, \"@id\": this.record_id }\n    }\n\n    async initObject() {\n\n        this.setDefaultId()\n\n        //this.contentElement.contentEditable = true\n        this.setMutationObserver()\n\n    }\n\n    // -----------------------------------------------------\n    //  Comment \n    // -----------------------------------------------------\n\n    setDefaultId() {\n\n        if (!this.id || this.id == null) {\n            this.id = String(crypto.randomUUID())\n        }\n    }\n\n\n    \n\n\n    // -----------------------------------------------------\n    //  get set \n    // -----------------------------------------------------\n\n\n    getThing(record_type, record_id) {\n\n        let thing = this._db.getFromCache(record_type, record_id)\n\n        if(!thing || thing == null){\n            this._db.getFromApi(record_type, record_id)\n        }\n        console.log('got ', thing)\n        return thing\n        \n        \n        if (record_type && record_type != null) {\n            if (record_id && record_id != null) {\n                \n                return this._get_record(record_type, record_id)\n            } else {\n                return this._get_records_for_type(record_type)\n            }\n\n        } else {\n            return null\n        }\n    }\n\n\n    _get_records_all() {\n        let results = []\n\n        for(let t of this._db){\n            results.push(t)     \n        }\n       \n        return results\n    }\n\n    _get_records_for_type(record_type) {\n\n        let results = []\n\n        for(let t of this._db){\n            if(t.record_type == record_type)\n            results.push(t)\n        }\n        return results\n    }\n\n\n    _get_record(record_type, record_id) {\n\n\n        for(let t of this._db){\n            if(t.record_type == record_type && t.record_id == record_id)\n            return t\n        }\n        return null\n\n    }\n\n\n    setThing(record) {\n\n\n        if(!record || record == null){ return null }\n\n        \n        if (!(record instanceof KrThing)){\n\n            let v \n            if(record['@type'] == \"ItemList\"){\n                v = new KrThings()\n            } else {\n                v = new KrThing()\n            }\n            \n            v.record = record\n            record = v\n        }\n\n        // Convert to things if itemlist\n        \n        if(record.record_type == 'ItemList' && !(record instanceof KrThings)){\n            let v = new KrThings()\n            v.record = record.record\n            record = v\n        }\n\n\n        // Check if already there\n        if (this.getThing(record.record_type, record.record_id)){\n            return record\n        }\n\n        // Set to cache\n        this._db.postToCache(record)\n\n        \n        //this._db.push(record)\n        this.setListenerOnThing(record)\n        \n        for (let r of record.things) {\n            \n            if(record.record_id != r.record_id){\n                this.setThing(r)\n            }\n        }\n       \n        return record\n    }\n\n\n    setListenerOnThing(thing){\n\n        let element = this\n        thing.addEventListener('all', event => {\n\n            let thing = event.target.record_type\n            for (let r of event.target.things) {\n\n                \n                this.setThing(r)\n                \n            }\n            element.setThing(event.target)\n            //t.api_post()\n\n            \n        })\n\n        \n    }\n\n\n\n    // -----------------------------------------------------\n    //  Comment \n    // -----------------------------------------------------\n\n\n\n    dispatchAddAction(record) {\n\n        let eventRecord = {\n            \"@type\": \"addAction\",\n            \"@id\": String(crypto.randomUUID()),\n            \"targetCollection\": this.record_ref,\n            \"object\": record,\n            \"actionStatus\": \"completedActionStatus\",\n            \"timeStart\": new Date(),\n            \"timeEnd\": new Date()\n        }\n        const newEvent = new CustomEvent(\"kr-addAction\", { detail: eventRecord });\n        this.dispatchEvent(newEvent)\n\n        const newEventAll = new CustomEvent(\"kr-all\", { detail: eventRecord });\n        this.dispatchEvent(newEventAll)\n\n    }\n\n    dispatchDeleteAction(record) {\n\n        let eventRecord = {\n            \"@type\": \"deleteAction\",\n            \"@id\": String(crypto.randomUUID()),\n            \"targetCollection\": this.record_ref,\n            \"object\": record,\n            \"actionStatus\": \"completedActionStatus\",\n            \"timeStart\": new Date(),\n            \"timeEnd\": new Date()\n        }\n\n        const newEvent = new CustomEvent(\"kr-deleteAction\", { detail: eventRecord });\n        this.dispatchEvent(newEvent)\n\n        const newEventAll = new CustomEvent(\"kr-all\", { detail: eventRecord });\n        this.dispatchEvent(newEventAll)\n\n    }\n\n    dispatchUpdateAction(record) {\n\n        let eventRecord = {\n            \"@type\": \"updateAction\",\n            \"@id\": String(crypto.randomUUID()),\n            \"targetCollection\": this.record_ref,\n            \"object\": record,\n            \"actionStatus\": \"completedActionStatus\",\n            \"timeStart\": new Date(),\n            \"timeEnd\": new Date()\n        }\n\n        const newEvent = new CustomEvent(\"kr-updateAction\", { detail: eventRecord });\n        this.dispatchEvent(newEvent)\n\n        const newEventAll = new CustomEvent(\"kr-all\", { detail: eventRecord });\n        this.dispatchEvent(newEventAll)\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Mutation observer \n    // -----------------------------------------------------\n\n    setMutationObserver() {\n\n        const callback = (mutationList, observer) => {\n            for (const mutation of mutationList) {\n                if (mutation.type === \"childList\") {\n                }\n            }\n        };\n\n\n        // Create an observer instance linked to the callback function\n        const observer = new MutationObserver(callback);\n\n        const config = { attributes: true, attributeOldValue: true, childList: true, subtree: true };\n\n        // Start observing the target node for configured mutations\n        observer.observe(this, config);\n\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n\n    connectedCallback() {\n        this.classList.add('kr-state')\n        this.initObject()\n    }\n\n    disconnectedCallback() {\n    }\n\n    adoptedCallback() {\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n    }\n\n}\n\ncustomElements.define(\"kr-state\", KrStateElement);\n\n\n\n\n\nfunction flattenThings(record) {\n\n    let results = []\n\n    if (Array.isArray(record)) {\n\n        for (let r of record) {\n            results = results.concat(flattenThings(r))\n        }\n\n    } else if (typeof record === 'object') {\n\n        if (record['@type']) {\n            results.push(record)\n        }\n\n        for (let k in record) {\n            results = results.concat(flattenThings(record[k]))\n        }\n    }\n    return results\n}\n\n\n\n","\nimport { KrBaseElement } from '../KrBaseElement/KrBaseElement.js'\nimport { template } from './template/template.js'\n\n\nexport class KrSelectElement extends KrBaseElement {\n    constructor() {\n        super();\n        this.htmlTemplate = template()            // HTML content as template\n        this._schema = null\n\n        this._eventListenerSelectSet = false\n        this._eventListenerParentSet = false\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject(){\n\n        \n        this.classList.add('kr-state')\n        super.initObject()\n        this._base_type = 'KrState'\n        this.setEventListenerSelect()\n        this.setEventListenerParent()\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Additional attributes \n    // -----------------------------------------------------\n\n\n\n    get checkbox(){\n        return this.querySelector('.krselect')\n    }\n\n\n    \n    setEventListenerParent(){\n\n\n        if(this._eventListenerParentSet = true) { \n            //return \n        }\n\n        this._eventListenerParentSet = true\n        \n        let element = this\n\n        if(!this.thingElement || this.thingElement==null){ return }\n\n      \n        this.thingElement.addEventListener('kr-selected', (event)=>{\n            element.checkbox.checked = true\n            \n        })\n        this.thingElement.addEventListener('kr-deselected', (event)=>{\n            element.checkbox.checked = false\n        })\n     \n    }\n\n    \n    setEventListenerSelect(){\n\n        \n        if(this._eventListenerSelectSet = true) { \n            //return \n        }\n      \n\n        this._eventListenerSelectSet = true\n\n        let element = this\n        this.addEventListener('click', (event)=>{\n            if(element.checkbox.checked == true){\n                element.thingElement.select()\n            } else {\n                element.thingElement.deselect()\n            }\n        })\n    }\n\n\n    \n\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n\n  \n    attributeChangedCallback(name, oldValue, newValue) {\n        super.attributeChangedCallback(name, oldValue, newValue)\n    }\n}\n\ncustomElements.define(\"kr-select\", KrSelectElement)\n\n\n","import { KrThing } from 'krakenthing'\n\n\nimport * as liquidjs from 'liquidjs';\nconst engine = new liquidjs.Liquid()\n\n\n\nexport class KrBaseElement extends HTMLElement {\n    /**\n     * Attributes:\n     * - record_type (str): returns @type\n     * - record_id (str): returns @id\n     * - thing (KrThing): returns KrThing\n     * - propertyID (str): return property name if relevant\n     * - position (int): return theposition of thevalue to use in a list of values\n     * - values (): returns values (if valueelement)\n     * - value (): returns value in position of values list\n     *\n     * - thingElement: returns relevant thingElement (.kr-thing)\n     * - propertyElement: returns closest propertyElement (.kr-property)\n     * - valueElement: returns closest valueElemenet (.kr-value)\n     * - stateElement: returns steteElement (kr-state)\n     * - isSelected (bool): returns true if is selected\n     *\n     * - potentialAction: return record of poeential actions\n     * \n     * Methods:\n     * - select: set to isSelected true, sends event\n     * - deselect: set to isSelected false, sends event\n     */\n    \n    constructor() {\n        super();\n        this._base_type = null\n        this._thing = null\n        this._record_type = null\n        this._record_id = null\n        this._propertyID = null\n        this._value = null\n        this._position = null\n        this._stateElement = null\n        this._thingElement = null\n        this._propertyElement = null\n        this._valueElement = null\n\n        this._isSelected = false\n        \n        this.htmlTemplate = null           // HTML content as template\n        this.htmlContent = null               // Actual HTML content\n        this.config = {}\n        this.useBestRecord = false\n        this.isInitialized = false\n        this.isBinded = false\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject(){\n\n        let s = this.stateElement\n        \n\n        this.setDefaultId()\n        this.loadFromAttributes()\n        this.loadFromValueElement()\n\n        await this.renderHTML()\n        \n        this.showContent()\n\n        this.bindToThing()\n    }\n\n    setDefaultId(){\n\n        if (!this.id || this.id == null){\n            this.id = String(crypto.randomUUID())\n        }\n    }\n\n    loadFromAttributes(){\n\n        if (this.dataset.record){\n            this.record = JSON.parse(this.dataset.record)\n        }\n\n        if (this.getAttribute('data-record-type')){\n            this.record_type = this.getAttribute('data-record-type')\n        }\n\n        if (this.getAttribute('data-record-id')){\n            this.record_id = this.getAttribute('data-record-id')\n        }\n\n        if (this.getAttribute('data-property-id')){\n            this.propertyID = this.getAttribute('data-property-id')\n        }\n\n        if (this.getAttribute('data-value')){\n            this.value = this.JSON.parse(getAttribute('data-value')) || null\n        }\n\n        if (this.getAttribute('data-position')){\n            this._position = this.getAttribute('data-position')\n        }\n        \n    }\n\n    loadFromValueElement(){\n\n        if(this._base_type != 'KrThing'){\n            return \n        }\n\n        if(!this.valueElement || this.valueElement == null ){\n            return\n        }\n\n        if(!this.valueElement.value || this.valueElement.value == null ){\n            return\n        }\n\n        if(this.valueElement.value['@type'] ){\n            this.record_type = this.valueElement.value['@type'] \n            this.record_id = this.valueElement.value['@id'] \n        }\n\n        if(this.valueElement.value?.record_type ){\n            this.record_type = this.valueElement.record_type\n            this.record_id = this.valueElement.record_id\n        }\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Content renderer \n    // -----------------------------------------------------\n\n\n    get elementRecord(){\n        // Record with added \n\n        if (!this.thing || this.thing == null ) { return {} }\n\n        if(this._base_type == 'KrThing'){\n            return simplify(this.thing.record) || {}\n        }\n\n        if(this._base_type == 'KrProperty'){\n            if(this.thing && this.thing != null){\n                \n                let v = []\n                let values = this.thing.getProperty(this.propertyID)?.propertyValuesNet || []\n\n                // Sort items if itemListElement\n                \n                if(this.propertyID == \"itemListElement\"){\n\n                    function compareFn(a, b) {\n                      if (a.value.position < b.value.position) {\n                        return -1;\n                      } else if (a.value.position > b.value.position) {\n                        return 1;\n                      }\n                      // a must be equal to b\n                      return 0;\n                    }\n                    values.sort(compareFn)\n                }\n\n                \n                for(let value of values){\n\n                    v.push( value.getSystemRecord(5) || value )\n                }\n\n\n                \n\n                \n                return v\n                \n               \n            }\n        }\n\n        if(this._base_type == 'KrValue'){\n\n           \n            \n            let pvs = this.thing.getProperty(this.propertyID)?.propertyValuesNet\n\n            if(!pvs || pvs == null) { return }\n            pvs = ensureArray(pvs)\n\n            \n            for(let pv of pvs){\n                \n                if (pv.record_id == this.record_id){\n                    return pv.getSystemRecord()\n                }\n            }\n            return null\n            \n           \n        }\n    }\n\n    async renderHTML(){\n\n\n        if (!this.htmlTemplate || this.htmlTemplate == null) { return }\n        \n        let tpl = await engine.parse(this.htmlTemplate)\n        this.htmlContent = await engine.render(tpl,  {item: this.elementRecord, config: this.config})\n\n    }\n\n    showContent(){\n        this.innerHTML = this.htmlContent\n    }\n\n\n    \n    refreshElement(){\n\n\n        this.initObject()\n        \n    }\n\n\n    // -----------------------------------------------------\n    //  Attributes \n    // -----------------------------------------------------\n\n    get record_type(){\n\n        if(this._record_type && this._record_type != null){\n            return this._record_type\n        }\n\n        if(!this._record_type || this._record_type == null){\n            this._record_type = this.getAttribute('data-record-type') || null\n        }\n\n        if(!this._record_type || this._record_type == null){\n            this._record_type = this?._thing?.record_type || null\n        }\n\n        return this._record_type\n    }\n\n    set record_type(value){\n        this._record_type = value\n        this.setAttribute('data-record-type', value)\n    }\n\n    get record_id(){\n\n        if(this._record_id && this._record_id != null){\n            return this._record_id\n        }\n\n        if(!this._record_id || this._record_id == null){\n            this._record_id = this.getAttribute('data-record-id') || null\n        }\n\n        if(!this._record_id || this._record_id == null){\n            this._record_id = this?._thing?.record_id || null\n        }\n\n        return this._record_id\n    }\n\n    set record_id(value){\n        this._record_id = value\n        this.setAttribute('data-record-id', value)\n    }\n\n    get position(){\n\n        if(this._position && this._position != null){\n            return this._position\n        }\n\n        if(!this._position || this._position == null){\n            this._position = this.getAttribute('data-position') || null\n        }\n\n        return this._record_id\n    }\n\n    set position(value){\n        this._position = Number(value)\n        this.setAttribute('data-position', value)\n    }\n    \n    get thing(){\n\n        if(this._thing && this._thing != null){\n            return this._thing\n        }\n\n        if(!this._thing || this._thing == null){\n            if(this.record_type != null && this.record_id != null){\n                this._thing = this.stateElement.getThing(this.record_type, this.record_id) || null  \n            }\n        } \n\n        // If value, get parent KrValueElement value\n        if(!this._thing || this._thing == null){\n            if(this._base_type == 'KrThing'){\n                this._thing = this.valueElement?.value || null\n            }\n\n        } \n\n        if(!this._thing || this._thing == null){\n            if(this._base_type == 'KrThing'){\n                // Create new thing\n                if(this.record_type && this.record_id){\n                    this._thing = new KrThing(this.record_type, this.record_id)    \n                    this.stateElement.setThing(this._thing)                \n                }\n            }\n\n           \n\n        } \n\n\n\n        \n        \n        // If value, get parent KrPropertyElement\n        if(!this._thing || this._thing == null){\n            if(this._base_type == 'KrValue'){\n                this._thing = this.propertyElement?.thing || null\n            }\n        } \n\n        // Get parent thing element\n        if(!this._thing || this._thing == null){\n            this._thing = this.thingElement?.thing || null\n        } \n\n        if(!this._thing || this._thing == null){\n            const searchParams = new URLSearchParams(window.location.search);\n            this._record_type = searchParams.get('@type')\n            this._record_id = searchParams.get('@id')\n            this._thing = this.stateElement.getThing(this.record_type, this.record_id) || null  \n        } \n\n\n        \n        return this._thing \n\n    }\n\n    set thing(value){\n\n        let newThing = this.stateElement.setThing(value)\n        this._thing = newThing\n        this.record_type = this._thing?.record_type || null\n        this.record_id = this._thing?.record_id || null\n        this.bindToThing()\n\n    }\n\n    get thingElement(){\n        return this?.parentElement?.closest('.kr-thing') || null\n    }\n\n    get propertyElement(){\n        return this?.parentElement?.closest('.kr-property') || null\n    }\n\n    get valueElement(){\n        return this?.parentElement?.closest('.kr-value') || null\n    }\n\n    get stateElement(){\n\n        if(this._stateElement && this._stateElement != null){\n            return this._stateElement\n        }\n\n        if(!this._stateElement || this._stateElement == null){\n            this._stateElement = document.getElementsByTagName('KR-STATE')?.[0]\n        }\n\n        if(!this._stateElement || this._stateElement == null){\n\n            this._stateElement = document.createElement('KR-STATE')\n            document.body.appendChild(this._stateElement)\n        }\n        return this._stateElement || null\n    }\n\n\n\n    get childThingElements(){\n        return getDirectChilds(this, 'kr-thing')\n    }\n\n    get childPropertyElements(){\n        return getDirectChilds(this, 'kr-property')\n    }\n\n    getChildPropertyElement(propertyID){\n        if(!propertyID || propertyID == null){ return null}\n        let childs = this.childPropertyElements\n        for(let child of childs){\n            if(child.propertyID == propertyID){\n                return child\n            }\n        }\n        return null\n    }\n    \n    get childValueElements(){\n        return getDirectChilds(this, 'kr-value')\n    }\n    \n    getChildValueElement(record_id){\n        let valueElements = this.childValueElements\n\n        for(let v of valueElements){\n            if(v.record_id == record_id){\n                return v\n            }\n        }\n        return null\n        \n    }\n    \n    get propertyID(){\n\n        if(this._propertyID && this._propertyID == null){\n            return this._propertyID\n        }\n\n        if(!this._propertyID || this._propertyID != null){\n            this._propertyID = this.getAttribute('data-property-id') || null\n        }\n\n        if(!this._propertyID || this._propertyID != null){\n            if(this._base_type == 'KrValue'){\n                this._propertyID = this.propertyElement?.propertyID || null\n            }\n        }\n        \n        return this._propertyID\n    }\n\n    set propertyID(value){\n        return this.setAttribute('data-property-id', value)\n    }\n\n\n    get values(){\n\n        if(!this.propertyID || this.propertyID == null){ \n            return [] \n        }\n\n        if(!this.thing || this.thing == null) {  \n            return [] \n        }\n\n        let values = this.thing.getProperty(this.propertyID)?.values || []\n        return values\n\n    }\n\n    set values(value){\n        this._value = value\n    }\n\n\n    get value(){\n        let values = this.values\n        if(Array.isArray(values)){\n            return values?.[Number(this.position)]\n        } else {\n            if (Number(this.position) == 0 || !this.position || this.position == \"\"){\n                return values\n            } else {\n                return null\n            }\n        }\n\n    }\n\n    set value(value){\n\n        this._value = value\n    }\n\n\n    // -----------------------------------------------------\n    //  Actions \n    // -----------------------------------------------------\n\n    \n\n    get potentialActions(){\n\n        let actions = this.thing.getProperty('potentialAction').values\n        if(!actions || actions == null || actions == [] || actions.length == 0){\n            return this.defaultActions\n        } else {\n            return actions\n        }\n    }\n\n    get defaultActions(){\n\n        return null\n    }\n\n\n    getAction(record_type, record_id){\n\n        let actions = this.potentialActions\n        for(let action of actions){\n            if(action?.[\"@type\"] == record_type && action?.['@id'] == record_id){\n                return action\n            }   \n        }\n        return null\n        \n    }\n\n    \n    // -----------------------------------------------------\n    //  State management \n    // -----------------------------------------------------\n\n    bindToThing(){\n\n        \n        if(!this.thing || this.thing == null) {  return }\n\n        if(this._base_type != \"KrThing\") {  return }\n\n\n        \n        if(this.isBinded == true) { return }\n\n        this.isBinded = true\n\n        \n        let element = this\n\n\n        \n        this.thing.addEventListener('all', event=> {\n            \n            \n            element.eventManager(event)\n        \n        })\n       \n        \n    }\n\n    eventManager(event){\n\n        \n        let target = event?.target\n       \n\n        if(!target || target == null) { return }\n\n        if(target.record_type != this.record_type) {  return }\n        if(target.record_id != this.record_id) {  return }\n\n        if(event.type == \"replaceAction\"){\n\n            this.eventReplace(event)\n            \n            \n        }\n        if(event.type == \"addAction\"){\n\n            this.eventReplace(event)\n\n        }\n        if(event.type == \"deleteAction\"){\n\n            this.eventReplace(event)\n\n        }\n    \n    }\n\n    eventReplace(event){\n\n        \n        if(this._base_type == \"KrThing\"){\n\n\n            \n            let p = this.getChildPropertyElement(event.data.propertyID)\n            if (p && p != null){\n                p.refreshElement()\n            } else {\n                this.refreshElement()\n            }\n\n            if(event.data.propertyID == \"position\"){\n                if(this.propertyElement){\n                    this.propertyElement.refreshElement()\n                    \n                }\n                \n            }\n            \n        } \n        \n    }\n\n    // -----------------------------------------------------\n    //  element selection \n    // -----------------------------------------------------\n\n\n\n    get isSelected(){\n        return this._isSelected\n    }\n    \n    select(){\n        if(this._isSelected == false){\n            this._isSelected = true\n            this.classList.add('active')\n            const newEvent = new CustomEvent(\"kr-selected\", { detail: this.record });\n            this.dispatchEvent(newEvent)\n        }\n        \n    }\n\n    deselect(){\n        if(this._isSelected == true){\n            this._isSelected = false\n            this.classList.remove('active')\n            const newEvent = new CustomEvent(\"kr-deselected\", { detail: this.record });\n            this.dispatchEvent(newEvent)\n            \n        }\n    }\n\n\n\n    \n    \n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n\n    connectedCallback() {\n        this.style.display = \"block\"\n        this.initObject()\n    }\n\n    disconnectedCallback() {\n    }\n\n    adoptedCallback() {\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n\n        if (['data-record-type', 'data-record-id'].includes(name)){\n            // Initialize from type/id\n        }\n    }\n}\n\ncustomElements.define(\"kr-base\", KrBaseElement);\n\n\n\n\n\nfunction simplify(data, count=0, origData=null) {\n\n\n    if(origData==null){ origData = data}\n\n\n    //return data\n    // Remove arrays of 1\n    if (Array.isArray(data)) {\n        // If the array has exactly one element, return that element\n        if (data.length === 1) {\n            return simplify(data[0], count + 1, origData);\n        } else {\n            // Otherwise, process each element in the array\n            return data.map(simplify);\n        }\n    } else if (data !== null && typeof data === 'object') {\n        // If the data is an object, process each key\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = simplify(data[key], count + 1, origData);\n            }\n        }\n        return newData;\n    } else {\n        // If the data is neither an array nor an object, return it as is\n        return data;\n    }\n}\n\n\nfunction ensureArray(value) {\n    if (Array.isArray(value)) {\n        return value;\n    } else {\n        return [value];\n    }\n}\n\n\n\nfunction getDirectChilds(element, className){\n\n    // returns direct childs, not grandchilds\n    let results = []\n\n    for (let child of element.children){\n        \n        if(child.classList && child.classList.contains(className)){\n            results.push(child)\n        } else {\n            results = results.concat(getDirectChilds(child, className))\n        }\n        \n        \n    }\n    return results\n}\n\n\n\n\nfunction debounce(func, timeout = 300) {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            func.apply(this, args);\n        }, timeout);\n    };\n}","\n\n\nexport function template(){\n\n    return `\n\n        \n            <input class=\"form-check-input krselect\" type=\"checkbox\" value=\"\" >\n        \n    \n    `\n}","\nimport { KrThings } from 'krakenthing'\nimport { KrBaseElement } from '../KrBaseElement/KrBaseElement.js'\nimport { template } from './template/template.js'\n\n\nexport class KrThingElement extends KrBaseElement {\n    constructor() {\n        super()\n        this.htmlTemplate = template()            // HTML content as template\n        this._record = null\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject(){\n\n        let newRecord = this?.thing?.record\n        if(newRecord == this._record){ return }\n\n        \n        this.classList.add('kr-thing')\n        super.initObject()\n        this._base_type = 'KrThing'\n    }\n\n\n    refreshElement(){\n\n        let newRecord = this.thing.record\n        if(newRecord == this._record){ return }\n        this._record = newRecord\n        this.initObject()\n\n        \n    }\n    \n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    \n  \n}\n\ncustomElements.define(\"kr-thing\", KrThingElement)\n\n\n","\n\nexport function template(){\n\n\n    return `\n\n\n\n        <div class=\"\">\n\n           \n            {% if item['@type'] == \"Action\" %}\n\n                <kr-action-status></kr-action-status> {{ item.name }} {{ item.agent.name }}\n\n\n\n            {% elsif item['@type'] == \"Person\" %}\n\n                <kr-image-sm></kr-image-sm> {{ item.name }} {{ item.givenName }} {{ item.familyName }} \n\n            {% else %}\n\n                {{ item.text }}\n\n            {% endif %}\n\n\n        </div>\n\n\n\n    `\n\n}","\nimport { KrThing } from 'krakenrecord';\nimport { KrThingElement } from '../KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\n\n\n\nexport class KrThingsElement extends KrThingElement {\n    /**\n     *\n     * Attributes:\n     * - recordTemplate (): template for new listItem.item records\n     * - elementTemplate (): template for new listItem.item element\n     * \n     */\n    constructor() {\n        super();\n\n        // Set template and content for list\n        this.htmlTemplate = template()\n        \n        // Set templates\n        this._recordTemplate = null\n        this._defaultRecordTemplate = {\"@type\": \"Thing\", \"name\": \"newElement\"} \n        this._elementTemplate = null\n        this._defaultElementTemplate = \"kr-card\"\n\n        // Set options\n        this._showSelect = null\n        this._defaultShowSelect = true\n        this._showPosition = null\n        this._defaultShowPosition = true\n        this._showActions = null\n        this._defaultShowActions = true\n        this.listItemTemplate = 'kr-list-item'\n        \n    \n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject(){\n\n        this.classList.add('kr-things')\n        this.config.showSelect = this.showSelect\n        this.config.showPosition = this.showPosition\n        this.config.elementTemplate = this.elementTemplate\n        this.config.potentialActions = this.potentialActions || this.defaultActions\n        \n        await super.initObject()\n       \n     \n        this.setEventListenerDrop()\n\n    }\n\n\n\n\n    // -----------------------------------------------------\n    //  Additional attributes - Config\n    // -----------------------------------------------------\n\n\n\n    get recordTemplate(){\n        // Retrieves record template for creation of new items\n        \n        if (this._recordTemplate && this._recordTemplate!= null){\n            return this._recordTemplate\n        }\n\n        if(!this._recordTemplate || this._recordTemplate == null){\n            let recordTemplate = this.getAttribute('data-record-template') || null\n            if(recordTemplate && recordTemplate != null){\n                this._recordTemplate = JSON.parse(recordTemplate)\n            }\n        }\n\n        if (!this._recordTemplate || this._recordTemplate == null){\n            return this._defaultRecordTemplate\n        }\n        \n        return this._recordTemplate\n    }\n\n    set recordTemplate(value){\n        this._recordTemplate = value\n        this.setAttribute('data-record-template', value)\n    }\n    \n    get elementTemplate(){\n        // Retrieves element template for creation of new items\n\n        if (this._elementTemplate && this._elementTemplate!= null){\n            return this._elementTemplate\n        }\n\n        if(!this._elementTemplate || this._elementTemplate == null){          \n            this._elementTemplate = this.getAttribute('data-element-template') || null\n        }\n\n        if (!this._elementTemplate || this._elementTemplate == null){\n            return this._defaultElementTemplate\n        }\n\n        return this._elementTemplate\n    }\n\n    set elementTemplate(value){\n        this._elementTemplate = value\n        this.setAttribute('data-element-template', value)\n    }\n\n\n    get showSelect(){\n        // Retrieves if select should be shown\n\n        if (this._showSelect && this._showSelect!= null){\n            return this._showSelect\n        }\n\n        if(!this._showSelect || this._showSelect == null){          \n            this._showSelect = this.getAttribute('data-show-select') || null\n        }\n\n        if (!this._showSelect || this._showSelect == null){\n            return this._defaultShowSelect\n        }\n        \n        return this._showSelect\n    }\n\n    set showSelect(value){\n        this._showSelect = value\n        this.setAttribute('data-show-select', value)\n    }\n\n    get showPosition(){\n        // Retrieves if position should be shown\n\n        if (this._showPosition && this._showPosition!= null){\n            return this._showPosition\n        }\n\n        if(!this._showPosition || this._showPosition == null){          \n            this._showPosition = this.getAttribute('data-show-position') || null\n        }\n\n        if (!this._showPosition || this._showPosition == null){\n            return this._defaultShowPosition\n        }\n\n        return this._showPosition\n    }\n\n    set showPosition(value){\n        this._showPosition = value\n        this.setAttribute('data-show-position', value)\n    }\n\n    get showActions(){\n        // Retrieves if position should be shown\n\n        if (this._showActions && this._showActions!= null){\n            return this._showActions\n        }\n\n        if(!this._showActions || this._showActions == null){          \n            this._showActions = this.getAttribute('data-show-actions') || null\n        }\n\n        if (!this._showActions || this._showActions == null){\n            return this._defaultShowActions\n        }\n\n        return this._showActions\n    }\n\n    set showActions(value){\n        this._showActions = value\n        this.setAttribute('data-show-actions', value)\n    }\n    \n    \n  \n    // -----------------------------------------------------\n    //  Element navigation \n    // -----------------------------------------------------\n\n    get krItemListElement(){\n        return this.querySelector('.krItemListElement')\n    }\n\n   \n    \n    // -----------------------------------------------------\n    //  Select section \n    // -----------------------------------------------------\n\n\n    select(){\n\n        super.select()\n        \n        for (let e of this.krItemListElement.children){\n            e.select()\n        }\n    }\n\n    deselect(){\n        super.deselect()\n        for (let e of this.krItemListElement.children){\n            e.deselect()\n        }\n        \n    }\n\n\n    \n    getSelecteditems(){\n\n        let items = []\n        for(let e of this.krItemListElement.children){\n            if (e.isSelected == true){\n                items.push(e)\n            }\n        }\n        return items\n    }\n\n    \n    \n    \n\n\n\n    // -----------------------------------------------------\n    //  Drag drop \n    // -----------------------------------------------------\n\n    \n    setEventListenerDrop(){\n        \n        this.addEventListener('dragover', event =>{\n            event.preventDefault()\n        })\n\n        this.addEventListener('drop', event =>{\n\n            let elementID = event.dataTransfer.getData('text/plain')\n            let element = document.getElementById(elementID)\n            if (element && element.tagName == 'KR-LIST-ITEM' && element.things.record_id != this.record_id){\n\n\n                let itemDrop = event.target.closest('KR-LIST-ITEM')\n\n                \n                // Add record\n                this.record.itemListElement.push(element.record)\n\n                // Create new element\n                let newElement = this.upsertItemElement(element.record)\n\n                // Insert before other item if dropped on one\n                if(itemDrop){\n\n                    \n                    itemDrop.before(newElement)\n                    //newElement.resetPosition()\n                } \n            }            \n        })\n    }\n\n\n    \n    // -----------------------------------------------------\n    //  CRUD - Elements\n    // -----------------------------------------------------\n    \n    \n    createItemElement(record){\n        record = this.recordToListItem(record)\n        let newItem = document.createElement(this.listItemTemplate)\n        newItem.thing = record\n        this.setItemEventListeners(newItem)\n        this.krItemListElement.appendChild(newItem)\n        return newItem\n    }\n\n\n    async insertAfterItemElement(referenceElement, record){\n       /**Insert a new item in itemListElement. Returns new item  \n        * \n        */\n        let item = this.thing.insertAfter(referenceElement.thing, record)\n        //this.stateElement.setThing(item)\n        //this.getChildPropertyElement('itemListElement')?.refreshElement()\n        return await this.getItemElementWait(item.record_type, item.record_id)\n        \n    }\n\n\n    async getItemElementWait(record_type, record_id) {\n\n        return new Promise((resolve) => {\n          const intervalId = setInterval(() => {\n                let result = this.getItemElement(record_type, record_id)\n                if (result && result != null ) {\n                  clearInterval(intervalId);\n                  resolve(result);\n                }\n              }, 100);\n        })\n    }\n\n    \n    \n    getItemRecord(record_id){\n        \n        for(let r in this.record.itemListElement){\n            if (r?.[\"@id\"] == record_id){\n                return r\n            }\n        }\n        return null\n    }\n\n\n    getItemElementByPosition(position){\n\n        for (let i of this.krItemListElement?.children || []){\n            let p= i.thing.getProperty('position')?.value\n            if (p == position ){\n                return i\n            }\n        }\n        return null\n        \n    }\n    \n    getItemElement(record_type, record_id){\n\n        let propertyElement = this.getChildPropertyElement('itemListElement')\n        for (let i of propertyElement?.children || []){\n            let g = i.querySelector('.kr-list-item')\n            if(g && g!= null){\n                if (g.record_type == record_type && g.record_id == record_id){\n                    return g\n                }\n            }\n            \n        }\n        return null\n    }\n    \n    updateItemElement(record){\n        let itemElement = this.getItemElement(record['@type'], record['@id'])\n        itemElement.record = record\n        return itemElement\n    }\n\n\n    upsertItemElement(record){\n        let itemElement = this.getItemElement(record['@type'], record['@id'])\n        if(itemElement && itemElement != null){\n            return this.updateItemElement(record)\n        } else {\n            return this.createItemElement(record)\n        }\n    }\n\n    \n\n    deleteItemRecord(record_ID){\n\n        this.record.itemListElement = this.record.itemListElement.filter((item) => item?.['@id'] != record_ID);\n    }\n\n    \n    deleteItemElement(record){\n        let itemElement = this.getItemElement(record['@type'], record['@id'])\n        itemElement.remove()\n    }\n\n    \n    recordToListItem(record){\n\n        if (record?.['@type'] == 'ListItem'){ return record}\n\n        let listItem  = {\n            \"@type\": \"ListItem\",\n            \"@id\": String(crypto.randomUUID()),\n            \"item\": record,\n            \"position\": this.krItemListElement?.children.length || 0\n        }\n        return listItem\n    }\n\n\n\n    setItemEventListeners(item){\n\n        item.addEventListener('kr-click', event => {\n\n            let detail = event.detail\n            const newEvent = new CustomEvent(\"kr-click\", { detail: detail });\n            this.dispatchEvent(newEvent)\n            \n        })\n\n        item.addEventListener('kr-select', event => {\n\n            const newEvent = new CustomEvent(\"kr-select\", { detail: event.detail });\n            this.dispatchEvent(newEvent)\n\n\n        })\n        \n    }\n\n\n\n    \n\n    // -----------------------------------------------------\n    //  Default actions \n    // -----------------------------------------------------\n\n\n    get defaultActions(){\n\n        let records = []\n        records.push(this.defaultActionDelete)\n\n        return records\n\n    }\n\n    get defaultActionDelete(){\n\n        let record = {\n            \"@type\": \"DeleteAction\",\n            \"@id\": \"deleteaction1\",\n            \"name\": \"DeleteAction1\",\n            \"image\": {\n                \"@type\": \"ImageObject\",\n                \"contentUrl\": \"./icons/delete.svg\"\n            },\n            \"actionStatus\": \"potentialActionStatus\",\n            \"object\": \"\",\n            \"collection\": {\"@type\": this.record_type, \"@id\": this.record_id}\n        }\n        return record\n\n    }\n\n    get defaultActionCopy(){\n\n        let record = {\n            \"@type\": \"\"\n        }\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Potential actions \n    // -----------------------------------------------------\n\n    executeAddAction(){\n\n        if(this.record?.listItemElement|| null  == null){\n            this.record.listItemElement = []\n        }\n        \n        let element = this.createItemElement(this.listItemRecordTemplate)\n        this.record.listItemElement.push(element)\n        \n    }\n\n\n    executeDeleteAction(){\n\n        for(let i of this.getSelecteditems()){\n            this.deleteItemElement(i.record)\n        }\n        this.isSelected = false\n\n    }\n\n    \n    \n    findAction(actionID){\n\n        for(let i of this.potentialActions){\n\n            if (i?.['@id'] == actionID){\n                return i\n            }\n        }\n        return null\n        \n    }\n\n\n    \n    \n    // -----------------------------------------------------\n    //  Attributes \n    // -----------------------------------------------------\n\n   \n\n\n    \n    \n    get records(){\n        return this.itemListElement\n    }\n\n    set records(value){\n        this._record = this.recordToList(value)\n    }\n\n    \n    recordToList(record){\n\n        if(Array.isArray(record)){\n            record = {\n                \"@type\": \"ItemList\",\n                \"@id\": String(crypto.randomUUID()),\n                \"name\": \"untitledlist\",\n                \"itemListElement\": record,\n            }\n        }\n        return record\n    }\n    \n  \n}\n\ncustomElements.define(\"kr-things\", KrThingsElement);\n\n\n\n\n\n\nfunction ensureArray(value) {\n    if (Array.isArray(value)) {\n        return value;\n    } else {\n        return [value];\n    }\n}\n","\n\n\nexport function template(){\n\n    return `\n        <!-- Title -->\n        <div class=\"row border p-3\">\n            <div class=\"col\">\n                 <h1>List {{ name }} </h1>\n            </div>\n        \n        </div>\n\n        \n        <div class=\"row border p-3\">\n\n            <!-- Selection -->\n            {% if config.showSelect == true %}\n                <div class=\"col col-1\">\n                    <kr-select>\n                    </kr-select>\n                </div>\n            {% endif %}\n\n\n            <!-- TBD -->\n            {% if config.showPosition == true %}\n                <div class=\"col col-1\">\n                            P\n                </div>\n            {% endif %}\n\n\n            <!-- Items -->\n            <div class=\"col\">\n            </div>\n\n\n\n            <!-- Actions -->\n            <div class=\"col col-1 text-end \">\n\n\n                <kr-action-menu>\n                </kr-action-menu>\n               \n            </div>\n\n            \n        </div>\n        \n        \n        <div class=\"row border \">\n\n            <div class=\"col m-0 p-0 krItemListElement\">\n\n\n                <kr-property data-record-type={{item['@type']}} data-record-id={{item['@id']}} data-property-id=\"itemListElement\" data-value-template=\"kr-list-item\">\n                </kr-property>\n               \n            \n                \n            </div>\n\n        </div>`\n\n    }\n\n\n\n\nexport function template2(){\n\n    return `\n        <!-- Title -->\n        <div class=\"row border p-3\">\n            <div class=\"col\">\n                 <h1>List {{ name }} </h1>\n            </div>\n\n        </div>\n\n\n        <div class=\"row border p-3\">\n\n            <!-- Selection -->\n            {% if config.showSelect == true %}\n                <div class=\"col col-1\">\n                    <kr-select>\n                    </kr-select>\n                </div>\n            {% endif %}\n\n\n            <!-- TBD -->\n            {% if config.showPosition == true %}\n                <div class=\"col col-1\">\n                            P\n                </div>\n            {% endif %}\n\n\n            <!-- Items -->\n            <div class=\"col\">\n            </div>\n\n\n\n            <!-- Actions -->\n            <div class=\"col col-1 text-end \">\n\n\n                <kr-action-menu>\n                </kr-action-menu>\n\n            </div>\n\n\n        </div>\n\n\n        <div class=\"row border \">\n\n            <div class=\"col m-0 p-0 krItemListElement\">\n\n\n                <kr-property property-id=\"itemListElement\">\n                </kr-property>\n                {% assign elements = item.itemListElement | sort: \"position\" %}\n                {% for element in elements %}\n\n                    <kr-list-item data-record-type=\"{{ element['@type'] }}\" data-record-id=\"{{ element['@id'] }}\">\n\n                    </kr-list-item>\n\n                {% endfor %}\n\n\n            </div>\n\n        </div>`\n\n    }\n\n","import { KrBaseElement } from '../KrBaseElement/KrBaseElement.js'\nimport { template } from './template/template.js'\n\n\n\nexport class KrPropertyElement extends KrBaseElement {\n    /**\n     * attribute:\n     * data-value-template: the html tag ot use for value elements\n     */\n\n    constructor() {\n        super()\n        this.htmlTemplate = null //template()            // HTML content as template\n        this._values = null\n        this._valueElements = {}\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject(){\n\n        this.classList.add('kr-property')\n        \n        //super.initObject()\n        this._base_type = 'KrProperty'\n        this.refreshElement()\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Additional attribute \n    // -----------------------------------------------------\n\n    get valueTemplate(){\n        \n        let valueTemplate = this.getAttribute('data-value-template')\n\n        if(!valueTemplate || valueTemplate==null){\n            valueTemplate = null\n        }\n        return valueTemplate\n    }\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n\n\n    // -----------------------------------------------------\n    //  Comment \n    // -----------------------------------------------------\n\n    refreshElement(){\n\n        let propertyID = this.propertyID\n        let property = this.thing.getProperty(propertyID)\n        let pvs = property.propertyValues\n        let newValues = property.values\n        \n        if(this._values == newValues){ return }\n        this._values == newValues \n\n        \n        let record_ids = pvs.map(item => item.record_id)\n\n        \n        // Sort items if itemListElement\n        \n        if(propertyID == \"itemListElement\"){\n\n            function compareFn(a, b) {\n                let positionA = a.value.getProperty('position')?.value || 0\n                let positionB = b.value.getProperty('position')?.value || 0\n                if(positionA == null) { positionA = 0}\n                if(positionB == null) { positionB = 0}\n                \n              if (positionA < positionB) {\n                return -1;\n              } else if (positionA > positionB) {\n                return 1;\n              }\n              // a must be equal to b\n              return 0;\n            }\n            pvs.sort(compareFn)\n           \n        }\n\n        \n        // Remove elements no longer there\n        for(let record_id of Object.keys(this._valueElements)){\n\n            let v = this.retrieveValueElement(record_id)\n            if (v && v!= null && (!(record_ids.includes(record_id)))){\n                v.remove()\n                delete this._valueElements[record_id]\n            }\n        }\n        \n        // Add new elements\n        let previousItemId = null\n        let previousItemElement = null\n\n        if(!pvs || pvs == null || pvs.length == 0){ return }\n        \n        \n        for(let p of pvs){\n            let position\n            let name\n            \n            let pType = p.record_type\n            let pId = p.record_id\n            let element = this.retrieveValueElement(pId)\n\n            if(!element || element == null ){\n                element = this.newValueElement(pType, pId)\n            } \n\n\n            \n            \n            if(previousItemElement && previousItemElement != null ){\n                //previousItemElement.after(element)\n                if(previousItemElement.nextElementSibling?.id != element?.id){\n                    previousItemElement.after(element)\n                }\n            } else {\n                //this.prepend(element)\n                if(this.firstElementChild?.id != element?.id){\n                    this.prepend(element)\n                }\n                \n            }\n            \n            previousItemId = pId\n            previousItemElement = element\n        }\n        \n    }\n\n\n    retrieveValueElement(record_id){\n        if(!record_id || record_id == null) { return null }\n        return this._valueElements[record_id]\n    }\n\n    newValueElement(record_type, record_id){\n\n        let element = document.createElement('kr-value')\n        element.record_type = record_type\n        element.record_id = record_id\n\n        this._valueElements[record_id] = element\n\n        return element\n    }\n\n    \n\n    \n}\n\n\ncustomElements.define(\"kr-property\", KrPropertyElement);\n\n","\n\nexport function template(){\n\n    \n\n    \n    return `\n    \n    \n    \n    {% for v in item %}\n       \n        <kr-value data-record-type=\"{{ v['@type'] }}\" data-record-id=\"{{ v['@id'] }}\" data-position=\"{{ forloop.index0 }}\">\n\n        </kr-value>\n\n    {% endfor %}\n    \n    \n    `\n}","import { KrBaseElement } from \"../KrBaseElement/KrBaseElement.js\";\nimport { template } from \"./template/template.js\";\n\nexport class KrValueElement extends KrBaseElement {\n    constructor() {\n        super();\n        this.htmlTemplate = template(); // HTML content as template\n        this._schema = null;\n        this._value = null;\n    }\n\n    // -----------------------------------------------------\n    //  Init\n    // -----------------------------------------------------\n\n    async initObject() {\n        this.classList.add(\"kr-value\");\n\n        this.config.valueTemplate = this.propertyElement?.valueTemplate || null\n        super.initObject();\n        this.propertyID\n        this._base_type = \"KrValue\";\n        //this.startObserver();\n        this._value = null\n    }\n\n\n    refreshElement(){\n\n        let newValue = this.value\n        if(this._value == newValue){ return }\n        this._value = newValue\n        \n        let childThings = this.getChildThingElements()\n\n        if(!childThings || childThings == null){ this.initObject() }\n\n       \n        let childThing = childThings[0]\n        if(childThing && childThing.record_type == newValue?.record_type && childThing.record_id == newValue?.record_id){\n            return\n        }\n\n        this.initObject()\n        \n    }\n    \n    // -----------------------------------------------------\n    //  Additional attributes\n    // -----------------------------------------------------\n\n    get dataElement() {\n        return this.querySelector(\"span\");\n    }\n\n    // -----------------------------------------------------\n    //  Vaklue observer\n    // -----------------------------------------------------\n\n    startObserver() {\n        var target = this.dataElement;\n        // create an observer instance\n        let element = this;\n        var observer = new MutationObserver(function (mutations) {\n            mutations.forEach(function (mutation) {\n                if (mutation.type == \"characterData\") {\n                    \n                    element.processContentChange();\n                }\n            });\n        });\n\n        // configuration of the observer:\n        var config = {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true,\n        };\n\n        // pass in the target node, as well as the observer options\n        observer.observe(this, config);\n    }\n\n    processContentChange() {\n\n        console.log(this.dataElement.textContent)\n        if(!this.propertyID){ return }\n        let oldValue = this._value;\n        let newValue = this.dataElement.textContent;\n        this._value = newValue;\n        this.thing.replaceProperty(this.propertyID, oldValue, newValue);\n        \n    }\n\n    // -----------------------------------------------------\n    //  Custom Element Events\n    // -----------------------------------------------------\n\n\n    // -----------------------------------------------------\n    //  Comment \n    // -----------------------------------------------------\n\n    \n}\n\ncustomElements.define(\"kr-value\", KrValueElement);\n","\n\n\nexport function template(){\n    return ` \n\n\n        \n    <span>\n    {% if item.object.value['@type'] %}\n\n        {% if config.valueTemplate %}\n    \n            <div class=\"\">\n            <{{ config.valueTemplate }} data-record-type=\"{{ item.object.value['@type'] }}\" data-record-id=\"{{ item.object.value['@id'] }}\"> </{{ config.valueTemplate }}>\n            </div>\n\n        {% else %}\n            <div class=\"\">\n           \n                <kr-thing data-record-type=\"{{ item.object.value['@type']}}\" data-record-id=\"{{ item.object.value['@id']}}\">\n\n                </kr-thing>\n\n         </div>\n\n\n        {% endif %}\n\n    {% else %}\n\n        {{ item.object.value }}\n\n    {% endif %}\n   \n    \n `\n}\n\n\n","\nimport { template } from './template/template.js'\nimport * as liquidjs from 'liquidjs';\nimport { KrThingElement } from '../KrThingElement/KrThingElement.js'\nconst engine = new liquidjs.Liquid()\n\n\n\n\nexport class KrListItemElement extends KrThingElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = template()\n\n     \n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        this.classList.add('kr-list-item')\n\n        if (this.things && this.things != null){\n            \n            this.config.elementTemplate = this.things.elementTemplate\n            this.config.showSelect = this.things.showSelect\n            this.config.showPosition = this.things.showPosition\n            this.config.showActions = this.things.showActions\n            this.config.potentialAction = this.potentialActions || this.defaultActions\n            this.isInitialized = true\n        }\n\n        \n        \n        await super.initObject()\n\n        this.setEventListenerPotentialActions()\n        //this.setEventListenerSelect()\n        //this.setEventListenerClick()\n        this.setEventListenerReorder()\n\n    }\n\n\n    refreshElement(){\n\n        \n        super.refreshElement()\n        \n    }\n    eventManager(event){\n\n        if(event.data.propertyID == 'previousItem'){\n            return \n        }\n        if(event.data.propertyID == 'nextItem'){\n            return \n        }\n        \n        super.eventManager(event)\n    }\n        \n    resetPosition(){\n\n        return\n        if(!this.previousItem || this.previousItem == null){\n            this.thing.position = 0\n        }\n\n        \n        if(this.thing.previousItem){\n\n            let previousPosition = this.thing.previousItem.getProperty('position').value\n           \n        }\n        let oldValue = this.thing.position\n        let newValue = this.position\n\n        if(oldValue != newValue) {\n            \n            this.thing.position = this.position\n\n            if (this.thing){\n                this.thing.position = this.position\n            }\n\n            this.refreshElement()\n        }\n        \n        if(this.nextItem){\n            this.nextItem.resetPosition()\n        }\n\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Element navigation \n    // -----------------------------------------------------\n\n    get krItemElement() {\n        return this.querySelector('.krItemElement')\n    }\n\n    get KrPotentialActions() {\n        return this.querySelector('kr-potential-actions')\n    }\n\n  \n\n\n\n    // -----------------------------------------------------\n    //  Click section \n    // -----------------------------------------------------\n\n\n\n    setEventListenerClick() {\n\n        let m = this\n        this.addEventListener('click', (event) => {\n            this.isClicked()\n        })\n    }\n    // -----------------------------------------------------\n    //  Potential actions section \n    // -----------------------------------------------------\n\n\n    setEventListenerPotentialActions() {\n\n        let m = this\n        this.addEventListener('mouseenter', (event) => {\n            m.KrPotentialActions.style.visibility = \"visible\"\n            m.firstElementChild.classList.add('bg-body-tertiary')\n\n            m.addEventListener('mouseleave', (event) => {\n                m.KrPotentialActions.style.visibility = \"hidden\"\n                if (this.isSelected == false) {\n                    m.firstElementChild.classList.remove('bg-body-tertiary')\n                }\n            })\n        })\n    }\n\n\n\n\n    // -----------------------------------------------------\n    //  Attributes \n    // -----------------------------------------------------\n\n\n    \n    \n\n\n    recordToListItem(record) {\n\n        if (record['@type'] == 'ListItem') { return record }\n\n        let listItem = {\n            \"@type\": \"ListItem\",\n            \"@id\": String(crypto.randomUUID()),\n            \"item\": record\n        }\n        return listItem\n    }\n\n    get position() {\n\n        let position = this.thing.position\n        if(position == null){ position = 0 }\n        return position\n\n        \n        if (this.previousItem == null) {\n            return 0\n        } else {\n            return this.thing.getProperty('position')?.value\n        }\n    }\n\n    set position(value){\n\n        if(value == null){ value = 0}\n        this.thing.position = value\n        \n    }\n\n    get firstItem() {\n\n        let item = this\n        while(item.previousItem){\n            item=item.previousItem\n        }\n        return item\n    }\n    \n    get previousItem() {\n\n        let value = this.thing.getProperty('previousItem')?.value\n        if(!value || value == null){ return null }\n\n        let itemElement = this.things.getItemElement(value.record_type, value.record_id)\n        \n        return itemElement\n            \n    }\n    \n    get nextItem() {\n        let value = this.thing.getProperty('nextItem')?.value\n        if(!value || value == null){ return null }\n        \n        let itemElement = this.things.getItemElement(value.record_type, value.record_id)\n        return itemElement\n    }\n\n    get things(){\n        return this.closest('.kr-things')\n    }\n\n\n\n\n\n    // -----------------------------------------------------\n    //  Default actions \n    // -----------------------------------------------------\n\n\n    get defaultActions(){\n\n        let records = []\n        records.push(this.defaultActionDelete)\n\n        return records\n        \n    }\n\n    get defaultActionDelete(){\n\n        let record = {\n            \"@type\": \"DeleteAction\",\n            \"name\": \"DeleteStuff\",\n            \"actionStatus\": \"potentialActionStatus\",\n            \"object\": {\"@type\": this.record_type, \"@id\": this.record_id},\n            \"collection\": {\"@type\": this.things.record_type, \"@id\": this.things.record_id}\n        }\n        return record\n\n    }\n    \n    get defaultActionCopy(){\n\n        let record = {\n            \"@type\": \"\"\n        }\n        \n    }\n    \n\n    // -----------------------------------------------------\n    //  Drag reorder \n    // -----------------------------------------------------\n\n\n    setEventListenerReorder(){\n\n        \n        \n        this.draggable=\"true\"\n        this.addEventListener('dragstart', event=>{\n            event.dataTransfer.setData(\"text/plain\", event.currentTarget.id);\n            event.currentTarget.classList.add('dragging')\n           \n        })\n        \n        this.addEventListener('dragend', event=>{\n            event.currentTarget.classList.remove('dragging')\n        })\n        \n        this.addEventListener('dragenter', event=>{\n            \n        })\n\n        this.addEventListener('dragleave', event=>{\n            \n            \n        })\n\n        this.addEventListener('dragover', event=>{\n            event.preventDefault()\n        })\n        \n        this.addEventListener('drop', event=>{\n            event.preventDefault()\n\n            \n\n            let elementID = event.dataTransfer.getData('text/plain')\n            let element = document.getElementById(elementID)\n            \n            // If not same list\n            if(element.things.record_id != event.currentTarget.things.record_id) {\n                return\n            }\n            \n            //             \n            event.currentTarget.before(element)\n            \n            // Reset positions\n            this.firstItem.resetPosition()\n\n            // Broadcast event\n            const newEvent = new CustomEvent(\"kr-reorder\", { detail: this.record });\n            this.dispatchEvent(newEvent)\n            \n        })\n    }\n\n    \n    \n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    isClicked() {\n\n        const event = new CustomEvent(\"kr-click\", { detail: this.record });\n        this.dispatchEvent(event)\n    \n    }\n\n    \n\n\n\n}\n\ncustomElements.define(\"kr-list-item\", KrListItemElement);","\n\nexport function template() {\n\n    return `\n    <div class=\"row border ps-3 pe-3 pt-0 pb-0 hover m-0\">\n\n\n        {% if config.showSelect == true %}\n            <div class=\"col col-1 mt-3\">\n                <kr-select>\n                  \n                </kr-select>\n             </div>\n         {% endif %}\n\n        \n        {% if config.showPosition == true %}\n            <div class=\"col col-1 mt-3\">\n                <kr-property data-record-type=\"{{ item['@type'] }}\" data-record-id=\"{{ item['@id'] }}\" data-property-id=\"position\">\n                    \n                </kr-property>\n                \n            </div>\n        {% endif %}\n        \n        <div class=\"col  pt-0 pb-0\">\n            <kr-property data-record-type=\"{{ item['@type'] }}\" data-record-id=\"{{ item['@id'] }}\" data-property-id=\"item\" data-value-template=\"{{ config.elementTemplate }}\">\n    \n            </kr-property>\n            \n            \n        </div>\n\n        {% if config.showActions == true %}\n            <div class=\"col col-1 p-1 text-end\">\n                <kr-potential-actions style=\"visibility: hidden\"> \n    \n                    <kr-action-menu>\n                   \n                    </kr-action-menu>\n                \n                </kr-potential-actions>\n            </div>\n        {% endif %}\n\n    </div>`\n\n}","import { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\nimport { template } from './template/template.js'\n\n\nexport class KrActionElement extends KrThingElement {\n    constructor() {\n        super();\n        this.htmlTemplate = template()\n        this.initialized = false\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n\n    initObject(){\n\n        \n        \n        if(this.thingElement){\n            let record = this.thingElement.getAction(this.record_type, this.record_id)\n            this.thing = this.thingElement.getAction(this.record_type, this.record_id)\n        }\n        super.initObject()\n       \n        this.initEventListeners()\n        \n    }\n\n\n    \n    \n    getIcon(actionName){\n\n        switch(actionName){\n\n            case \"addAction\":\n                return \"./icons/plus.svg\"\n            case \"addPropertyValueAction\":\n                return \"./icons/plus.svg\"\n            case \"deletePropertyValueAction\":\n                return \"./icons/delete.svg\"\n            default: \n                return \"./icons/test.svg\"\n            \n        }\n    }\n\n\n    \n    initEventListeners(){\n\n        if(this.initialized == false){\n            this.addEventListener('click', (event) =>{\n                this.actionExecute()\n\n            })\n            this.initialized = true\n        }\n      \n    }\n\n\n\n    // -----------------------------------------------------\n    //  Process action \n    // -----------------------------------------------------\n   \n\n\n    \n    actionExecute(){\n\n\n        if(this.record_type == \"addAction\"){\n\n            this.executeAddAction()\n\n            \n        } else {\n        \n        let actionName = this.getAttribute('data-action-name')\n        let property = this.closest('.kr-property')\n        \n        switch(actionName){\n\n            case \"addAction\":\n                this.thing.addAction()\n\n            case \"addPropertyValueAction\":\n                property.addPropertyValueAction()\n        }\n        }\n            \n    }\n\n\n    executeAddAction(){\n\n        let o = this.thing.getProperty('object').value\n        \n        let collection = this.thing.getProperty('targetCollection').value\n        \n        let collectionObject = this.krState.getThing(collection.record_type, collection.record_id)\n\n        \n        collectionObject.addProperty('itemListElement', o)\n\n    }\n\n    executeDeleteAction(){\n\n       \n\n    }\n\n    \n    // -----------------------------------------------------\n    //  Events \n    // -----------------------------------------------------\n\n    connectedCallback() {\n        super.connectedCallback()\n    }\n    \n\n}\n\ncustomElements.define(\"kr-action\", KrActionElement);","\n\n\nexport function template() {\n\n    return `\n\n\n        <span>\n            <span>\n                \n                    <img src=\"{{ item.image.contentUrl }}\" width=\"32px\" height=\"32px\" class=\"\" alt=\"...\" onerror='this.style.display=\"none\"'> \n    \n    \n            </span>\n    \n            <span>\n    \n    \n                {{ item.name }}\n    \n            </span>\n        </span>\n    `\n\n}","import { KrPropertyElement } from '../../baseElements/KrPropertyElement/KrPropertyElement.js'\nimport { template } from './template/template.js'\n\n\nexport class KrActionMenuElement extends KrPropertyElement {\n    constructor() {\n        super();\n        this.htmlTemplate = template()\n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n\n    initObject(){\n\n        this.propertyID = 'potentialAction'\n        \n        this.config.potentialActions =  this?.thingElement?.potentialActions\n        super.initObject()\n        \n    }\n\n    \n    // -----------------------------------------------------\n    //  Events \n    // -----------------------------------------------------\n\n    connectedCallback() {\n        super.connectedCallback()\n    }\n\n\n}\n\ncustomElements.define(\"kr-action-menu\", KrActionMenuElement);","\n\nexport function template() {\n\n    return `\n    \n    <div class=\"btn-group p-0 m-0\">\n\n      <a href=\"#\" role=\"button\"  class=\"btn  p-0\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n     \n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical\" viewBox=\"0 0 16 16\">\n          <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0\"/>\n        </svg>\n      </a>\n\n     \n      <ul class=\"dropdown-menu\">\n\n        \n        {% for action in config.potentialActions %}\n        <li class=\"dropdown-item\">\n       \n          <kr-action data-record-type=\"{{ action['@type'] }}\" data-record-id=\"{{ action['@id'] }}\">\n          </kr-action>\n        \n        </li>\n\n        {% endfor %}\n\n        \n      </ul>\n</div>`\n\n}\n","\nimport { KrPropertyElement } from '../../baseElements/KrPropertyElement/KrPropertyElement.js'\n\n//import { status } from './template/status.js'\n\n\nexport class KrActionStatusElement extends KrPropertyElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.propertyID = 'actionStatus'\n        this.setEventListenerClick()\n\n        this._value = null\n\n        \n       \n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    initObject(){\n\n        //super.initObject()\n        this.refreshElement()\n        \n        \n    }\n\n    refreshElement(){\n\n        let newValue = this.thing.getProperty('actionStatus').value\n        if(newValue != this._value){\n            this._value = newValue\n            if(this._value == \"potentialActionStatus\") { this.contentElement.innerHTML = this.potentialActionStatusIcon()}\n                else if(this._value == \"completedActionStatus\") { this.contentElement.innerHTML = this.completedActionStatusIcon() }\n                    \n                else if(this._value == \"activeActionStatus\") { this.contentElement.innerHTML = this.activeActionStatusIcon() }\n                else if(this._value == \"failedActionStatus\") { this.contentElement.innerHTML = this.failedActionStatusIcon() }\n                else  { this.contentElement.innerHTML = this.potentialActionStatusIcon() }\n            }\n        \n    }\n\n    // -----------------------------------------------------\n    //  Set listener \n    // -----------------------------------------------------\n\n\n    setEventListenerClick(){\n\n        this.addEventListener('click', event =>{\n\n            this.isClicked()\n        })\n        \n    }\n\n\n    // -----------------------------------------------------\n    //  Additional attributes \n    // -----------------------------------------------------\n\n    get contentElement(){\n        return this\n    }\n    \n    \n    // -----------------------------------------------------\n    //  Status \n    // -----------------------------------------------------\n\n\n    assignNextStatus(){\n\n        if(this._value == \"potentialActionStatus\") { \n            this.setCompletedActionStatus() \n        }\n        else if(this._value == \"completedActionStatus\") { \n            this.setActiveActionStatus() \n        } else if(this._value == \"activeActionStatus\") { this.setFailedActionStatus() }\n        else if(this._value == \"failedActionStatus\") { this.setPotentialActionStatus() }\n        else  { this.setPotentialActionStatus() }\n    }\n\n\n\n    setPotentialActionStatus(){\n\n        this._value = \"potentialActionStatus\"\n        this.thing.replaceProperty('actionStatus', 'potentialActionStatus')\n        this.contentElement.innerHTML = this.potentialActionStatusIcon()\n    }\n\n    setActiveActionStatus(){\n\n        this._value = \"activeActionStatus\"\n        this.thing.replaceProperty('actionStatus','activeActionStatus')\n        this.contentElement.innerHTML = this.activeActionStatusIcon()\n    }\n    \n    setCompletedActionStatus(){\n\n        this._value = \"completedActionStatus\"\n        this.thing.replaceProperty('actionStatus','completedActionStatus')\n        this.contentElement.innerHTML = this.completedActionStatusIcon()\n\n    }\n\n    setFailedActionStatus(){\n\n        this._value = \"failedActionStatus\"\n        this.thing.replaceProperty('actionStatus','failedActionStatus')\n        this.contentElement.innerHTML = this.failedActionStatusIcon()\n\n    }\n    \n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    isClicked() {\n        console.log('click')\n        this.assignNextStatus()\n        const event = new CustomEvent(\"kr-click\", { detail: this._value });\n        this.dispatchEvent(event)\n    }\n\n\n    \n\n    \n\n    connectedCallback() {\n        //console.log(\"Custom element added to page.\");\n        super.connectedCallback()\n        if(!this._value || this._value == null) { this.setPotentialActionStatus()}\n    }\n\n    disconnectedCallback() {\n        //console.log(\"Custom element removed from page.\");\n    }\n\n    adoptedCallback() {\n       // console.log(\"Custom element moved to new page.\");\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        //console.log(`Attribute ${name} has changed krListItem.`);\n\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Comment \n    // -----------------------------------------------------\n\n    completedActionStatusIcon(){\n\n        // checked square \n        return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check-square\" viewBox=\"0 0 16 16\">\n              <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\n              <path d=\"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z\"/>\n            </svg>`\n    }\n\n\n    potentialActionStatusIcon(){\n        // squre\n        return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-square\" viewBox=\"0 0 16 16\">\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\n</svg>`\n    }\n\n    \n\n    activeActionStatusIcon(){\n            //dash square\n        return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-dash-square\" viewBox=\"0 0 16 16\">\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\n  <path d=\"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8\"/>\n</svg>`\n    }\n\n    failedActionStatusIcon(){\n                //dash square\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-square\" viewBox=\"0 0 16 16\">\n  <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\n  <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\n</svg>`\n        }\n\n\n\n}\n\ncustomElements.define(\"kr-action-status\", KrActionStatusElement);","import { KrThingElement } from \"../../../baseElements/KrThingElement/KrThingElement.js\";\n\nimport { table } from \"./template/table.js\";\n\nexport class KrTable extends KrThingElement {\n    constructor() {\n        super();\n\n        // Override template\n        this.htmlTemplate = table();\n\n        this._keys = null;\n        this._headers = null;\n\n        //\n        this._isSelected = false;\n    }\n\n    // -----------------------------------------------------\n    //  Init\n    // -----------------------------------------------------\n\n    async initObject() {\n        //\n\n        if (!this.thing) {\n            console.log(\"no thing\");\n            return;\n        }\n\n        this.config.keys = this.keys\n        this.config.headers = this.headers\n\n        await super.initObject();\n    }\n\n    get keys() {\n        if (this._keys && this._keys != null && this._keys != []) {\n            return this._keys;\n        }\n\n        if(!this._keys || this._keys == null || this._keys == []){\n            this._keys = this.getAttribute(\"data-keys\")\n        }\n\n        if(!this._keys || this._keys == null || this._keys == []){\n            this._keys = this.getKeysFromRecord()\n        }\n\n        return this._keys || [];\n    }\n\n    set keys(value) {\n        \n        this._keys = value;\n        this.setAttribute(\"data-keys\", value);\n    }\n\n    getKeysFromRecord(){\n\n        let items = this.thing.getProperty(\"itemListElement\").values;\n        let keys = [];\n\n        for (let item of items) {\n            for (let k of Object.keys(item.record)) {\n                if (!keys.includes(k)) {\n                    keys.push(k);\n                }\n            }\n        }\n        return keys\n    }\n\n\n    get headers() {\n        if (this._headers && this._headers != null && this._headers != []) {\n            return this._headers;\n        }\n\n        if(!this._headers || this._headers == null || this._headers == []){\n            this._headers = this.getAttribute(\"data-headers\")\n        }\n\n        if(!this._headers || this._headers == null || this._headers == []){\n            this._headers = this.keys\n        }\n\n        return this._headers || [];\n    }\n\n    set headers(value) {\n\n        this._headers = value;\n        this.setAttribute(\"data-headers\", value);\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Custom Element Events\n    // -----------------------------------------------------\n\n    isClicked() {\n        const event = new CustomEvent(\"kr-click\", { detail: this.record });\n        this.dispatchEvent(event);\n    }\n}\n\ncustomElements.define(\"kr-table\", KrTable);\n","\n\n\n\n\nexport function table() {\n\n    return `\n       \n        <table class=\"table table-hover\">\n            <thead class=\"table-dark\">\n                <tr>\n\n                    <th scope=\"col\"><div class=\"form-check\">\n                                  <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckIndeterminate\">\n                                  \n                                    </div></th>\n        \n                    {% for key in config.headers %}     \n                        <th scope=\"col\">\n                            {{ key }}\n                        </th>\n                    {% endfor %}\n\n                    <th scope=\"col\"></th>\n                </tr>\n            </thead>\n\n          \n            <tbody>\n        \n                \n                {% for r in item.itemListElement %}\n\n                    \n                    <tr>\n\n                        \n                       \n                        <td>\n                        \n                            <div class=\"form-check\">\n                                  <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckIndeterminate\">\n                                  \n                                    </div>\n                        </td>\n    \n    \n    \n                        {% for k in config.keys %}   \n                                <td>\n                               \n                                    <kr-table-property data-record-type=\"{{ r['@type'] }}\" data-record-id=\"{{ r['@id'] }}\" data-property-id=\"{{ k }}\">\n                \n                               \n                                      \n                                   <kr-table-property>\n                                </td>\n                        {% endfor %}\n\n                        <td class=\"text-end\">\n                            <kr-action-menu data-record-type=\"{{ r['@type'] }}\" data-record-id=\"{{ r['@id'] }}\" >\n                            </kr-action-menu>\n                        </td>\n                             \n                    </tr>\n                    \n                {% endfor %}\n               \n            </tbody>\n        </table>\n        \n        `\n\n}\n\n\n\n","\nimport { KrPropertyElement } from \"../../../baseElements/KrPropertyElement/KrPropertyElement.js\";\n\n\nimport { tableProp } from './template/tableProperty.js'\n\n\n\nexport class KrTablePropertyElement extends KrPropertyElement {\n    constructor() {\n        super();\n        this.htmlTemplate = tableProp()\n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n\n\n    initObject(){\n\n      \n          super.initObject()\n\n    }\n\n\n\n\n    // -----------------------------------------------------\n    //  Events \n    // -----------------------------------------------------\n\n    //connectedCallback() {\n    //    this.initObject()\n    //}\n\n\n}\n\ncustomElements.define(\"kr-table-property\", KrTablePropertyElement);","\n\n\nexport function tableProp(){\n\n    return `\n\n    <kr-table-value data-position=\"0\">\n\n      </kr-table-value>\n    \n    `\n    \n}","\n\nimport { KrValueElement } from \"../../../baseElements/KrValueElement/KrValueElement.js\";\n\nimport { tableValue } from './template/tablevalue.js'\n\nexport class KrTableValueElement extends KrValueElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = tableValue()\n\n        \n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n\n        \n        \n        await super.initObject()\n\n        \n    }\n\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-table-value\", KrTableValueElement);\n\n\n","\n\n\nexport function tableValue(){\n\n\n    return `\n\n              \n\n                {% if item['@type']  %}\n\n                       \n\n                        <kr-avatar data-record-type={{ item['@type'] }} data-record-id={{ item['@id'] }}> \n\n                        </kr-avatar>\n\n\n                {% elsif item[0]['@type']  %}\n\n                              \n\n                        <kr-avatar data-record-type={{ item[0]['@type'] }} data-record-id={{ item[0]['@id'] }}> \n                        </kr-avatar>\n\n\n                {% else %}\n\n\n\n                        {{ item }}\n\n\n                {% endif %}\n\n\n\n\n\n    `\n\n}\n\n","\nimport { KrThingElement } from '../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrAvatar extends KrThingElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = template()\n\n\n        // \n        this._isSelected = false\n        //this.setEventListenerDrag()\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        await super.initObject()\n\n    }\n\n\n\n\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    setEventListenerDrag(){\n\n        this.draggable=true\n        this.addEventListener('dragstart', event =>{\n\n            event.preventDefault()\n            event.dataTransfer.setData('text', JSON.stringify(this.record, null, 4))\n\n            \n            \n        })\n\n        \n    }\n\n\n\n    \n\n\n\n\n\n}\n\ncustomElements.define(\"kr-avatar\", KrAvatar);","\n\nexport function template() {\n\n    return `\n        <div class=\"d-flex justify-content-start align-items-center\">\n            <div class=\"\">\n\n                {% if item.contentUrl %}\n                    <div class=\" me-2 rounded-2 bg-label-secondary\"><img height=\"38px\" width=\"38px\"\n                            src=\"{{ item.contentUrl}}\" alt=\"{{ item.name }}\" class=\"rounded-2\"></div>\n                    \n                {% endif %}\n\n                {% if item.image %}\n                        <div class=\" me-2 rounded-2 bg-label-secondary\"><img height=\"38px\" width=\"38px\"\n                                src=\"{{ item.image.contentUrl }}\" alt=\"{{ item.image.name }}\" class=\"rounded-2\"></div>\n                        \n\n                {% endif %}\n            </div>\n            \n            <div class=\"d-flex flex-column\">\n                <p class=\"text-body text-nowrap mb-0\">{{ item.name }}</p>\n                <small class=\"text-muted text-truncate d-none d-sm-block\"> {{ item.description }}</small>\n            </div>\n        </div>\n\n`\n\n}\n\n","\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\n\n// -----------------------------------------------------\n//  Comment \n// -----------------------------------------------------\n\n\nexport class KrImage extends KrThingElement {\n    constructor() {\n        super();\n\n        this.htmlTemplate = template()\n\n    }\n\n    async initObject() {\n\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image\", KrImage);\n\n\n// -----------------------------------------------------\n//  Comment \n// -----------------------------------------------------\n\n\nexport class KrImageAvatar extends KrImage {\n    constructor() {\n        super();\n\n        \n\n    }\n\n    async initObject() {\n\n        this.config.size = \"xs\"\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image-avatar\", KrImageAvatar);\n\n\n// -----------------------------------------------------\n//  Comment \n// -----------------------------------------------------\n\n\nexport class KrImageSm extends KrImage {\n    constructor() {\n        super();\n\n      \n\n    }\n\n    async initObject() {\n        this.config.size = \"sm\"\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image-sm\", KrImageSm);\n\n\n// -----------------------------------------------------\n//  Comment \n// -----------------------------------------------------\n\n\nexport class KrImageMd extends KrImage {\n    constructor() {\n        super();\n       \n\n    }\n\n    async initObject() {\n\n         this.config.size = \"md\"\n\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image-md\", KrImageMd);\n\n\n\n// -----------------------------------------------------\n//  Comment \n// -----------------------------------------------------\n\n\nexport class KrImageLg extends KrImage {\n    constructor() {\n        super();\n        \n      \n\n    }\n\n    async initObject() {\n        this.config.size = \"lg\"\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image-lg\", KrImageLg);\n\n\nexport class KrImageXs extends KrImage {\n    constructor() {\n        super();\n\n    }\n\n    async initObject() {\n        this.config.size = \"xs\"\n        await super.initObject()\n\n    }\n}\ncustomElements.define(\"kr-image-xs\", KrImageXs);","\n\n\n\nexport function template(){\n\n    return `\n\n        \n        {% if config.size == \"xs\" %}\n            {% assign style=\"max-height:38px; max-width:38px; height:auto; width:auto;\" %}\n            {% assign class=\"\" %}\n        {% elsif config.size == \"sm\" %}\n            {% assign style=\"max-height:100px; max-width:100px; height:auto; width:auto;\" %}\n            {% assign class=\"\" %}\n        {% elsif config.size == \"md\" %}\n            {% assign style=\"max-height:400px; max-width:400px; height:auto; width:auto;\" %}\n            {% assign class=\"\" %}\n        {% elsif config.size == \"lg\" %}\n            {% assign style=\"max-height:1200px; max-width:800px; height:auto; width:auto;\" %}\n            {% assign class=\"\" %}\n        {% else %}\n            {% assign style=\"\" %}\n            {% assign class=\"img-fluid\" %}\n        {% endif %}\n\n\n        {% if item.contentUrl %}\n\n            {% assign isImage = true %}\n            {% assign url = item.contentUrl %}\n            {% assign name = item.name %}\n    \n        {% elsif item.image %}\n            {% assign isImage = true %}\n            {% assign url = item.image.contentUrl %}\n            {% assign name = item.image.name %}\n\n        {% else %}\n            {% assign isImage = false %}\n            {% assign url = \"\" %}\n            {% assign name = \"\" %}\n\n        {% endif %}\n\n\n        {% if item.contentUrl contains \"<svg\" %}\n            {% assign isSvg = true %}\n            {% assign svgValue = item.contentUrl %}\n        {% elsif item.image contains \"<svg\" %}\n            {% assign isSvg = true %}\n            {% assign svgValue = item.image %}\n        {% elsif item.image.contentUrl contains \"<svg\" %}\n            {% assign isSvg = true %}\n            {% assign svgValue = item.image.contentUrl %}\n        {% endif %}\n    \n\n\n        {% if isSvg == true %}\n\n            <div class=\"{{ class }}\" style=\"{{ style }}\">\n                {{ svgValue }}\n            </div>\n\n        \n        \n        {% elsif isImage == true %}\n    \n            <div class=\" me-2 bg-label-secondary\">\n                \n                <img \n                    class=\"{{ class }}\" \n                    style=\"{{ style }}\"\n                    src=\"{{ url }}\" \n                    alt=\"{{ name }}\"  \n                    onerror='this.style.display = \"none\"'\n                    >\n            \n            </div>\n\n        {% endif %}\n\n    `\n}","\nimport { KrakenSchemas } from 'krakenschema'\n\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { formSm } from './template/formSm.js'\n\n\nexport class KrFormSm extends KrThingElement {\n    constructor() {\n        super();\n\n        // Override template\n        this.htmlTemplate = formSm()\n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        if(!this.record_type || this.record_type === null || typeof this.record_type == \"undefined\"){ return }\n        \n        \n        if(!this.thing) { \n            this.record = {\"@type\": this.record_type, \"@id\": String(crypto.randomUUID())}\n        }\n        \n        this.config.recordTypes = this.thing.schema?.expectedTypes\n        this.config.properties= []\n\n        console.log('a', this.thing, this.thing.schema)\n        for(let p of this?.thing?.schema?.propertiesLight || []){\n            this.config.properties.push(p?.record_id)\n        }\n        \n        \n        await super.initObject()\n       \n    }\n\n\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    setEventListenerDrag(){\n\n        this.draggable=true\n        this.addEventListener('dragstart', event =>{\n\n            event.preventDefault()\n            event.dataTransfer.setData('text', JSON.stringify(this.record, null, 4))\n\n        })\n    }\n\n\n    connectedCallback() {\n        super.connectedCallback()\n        //this.initObject()\n\n    }\n\n\n\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-form-sm\", KrFormSm);\n\n\n","\n\nexport function formSm() {\n\n    return `\n    <div class=\"container-md\">\n        <form>\n\n\n\n            <kr-form-input data-property-id=\"@type\">\n                </kr-form-input>\n\n            <kr-form-input data-property-id=\"@id\">\n                </kr-form-input>\n\n\n            {% for p in config.properties %}\n\n                <kr-form-input data-property-id=\"{{p}}\">\n                </kr-form-input>\n              \n\n\n            {% endfor %}\n              \n              \n              \n        </form>\n        </div>\n`\n\n}\n\n","\nimport { KrPropertyElement } from '../../baseElements/KrPropertyElement/KrPropertyElement.js'\n\nimport { KrValueElement } from '../../baseElements/KrValueElement/KrValueElement.js'\n\n\nimport { formInput } from './template/formInput.js'\n\n\nlet DEFAULTLOCALE = \"en-US\"\n\n\n\nexport class KrFormInput extends KrPropertyElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = formInput()\n\n\n        // \n        //this._isSelected = false\n        //this.setEventListenerDrag()\n\n    }\n\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        \n        await super.initObject()\n    }\n\n\n\n\n\n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    setEventListenerDrag(){\n\n        this.draggable=true\n        this.addEventListener('dragstart', event =>{\n            event.preventDefault()\n            event.dataTransfer.setData('text', JSON.stringify(this.record, null, 4))\n        })\n    }\n\n}\n\ncustomElements.define(\"kr-form-input\", KrFormInput);\n\n\n","\n\n\nexport function formInput(){\n\n    return `\n\n        <div class=\"mb-3\">\n\n\n\n            <div class=\"row\">\n                \n               \n                <div class=\"col-6  col-md-2\">\n                        <label for=\"{{ config.propertyID }}\" class=\"form-label text-capitalize\">{{ config.propertyID }}</label>\n                </div>\n                \n                \n                <div class=\"col-12  order-4 col-md-9 order-md-2\">\n                        {% if item.first %}\n                            {% for r in item %}\n\n                                <div class=\"row\">\n                                    <div class=\"col col-12 col-md-1\"> \n                                        <h6>{{forloop.index0}}</h6>\n                                    </div>\n                                    <div class=\"col col-12 col-md-11\">\n                                            \n                                        <kr-form-input-value data-property-id=\"{{ config.propertyID }}\"  data-position=\"{{forloop.index0}}\"> </kr-form-input-value>\n                                           \n                                    </div>\n                                </div>\n                            {% endfor %}\n                \n                        {% else %}\n                \n                            <kr-form-input-value data-property-id=\"{{ config.propertyID }}\"  data-position=\"0\"> </kr-form-input-value>\n                \n                        {% endif %}\n                \n                </div>\n                \n                \n \n\n\n                \n                <div class=\"col order-3 justify-content-end text-end\">\n                        <span class=\"kr-add justify-content-end\">\n\n\n                            <kr-action data-action-name=\"addPropertyValueAction\">\n\n                            </kr-action>\n                        \n                            \n                        </span>\n                </div>\n            </div>\n        </div>\n                \n\n    `\n\n\n    \n}","\nimport { KrakenSchemas } from 'krakenschema'\n\n\nimport { KrValueElement } from '../../baseElements/KrValueElement/KrValueElement.js'\n\n\n\nlet DEFAULTLOCALE = \"en-US\"\n\n\n\nexport class KrFormInputValue extends KrValueElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        //this.htmlTemplate = avatar()\n\n\n        // \n        //this._isSelected = false\n        //this.setEventListenerDrag()\n        \n\n    }\n\n\n\n\n    // -----------------------------------------------------\n    //  Attr \n    // -----------------------------------------------------\n\n    get propertyName(){\n\n        let propertyName = this.krakenSchema?.getLocalizedPropertyID(DEFAULTLOCALE, this.propertyID) || this.propertyID\n        propertyName = propertyName.replace(/([A-Z])/g, \" $1\");\n        return propertyName\n    }\n    \n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        console.log('init property')\n        await super.initObject()\n        this.setEventListenerValue()\n        \n        this.krakenSchema = KrakenSchemas.get(this.propertyID);\n\n\n\n        let enumerations = this.krakenSchema?.expectedType?.enumerationItems || []\n    \n        if(this.propertyID == \"@type\"){\n            // Handle record_type\n            this.innerHTML = this.getHtmlRecordType()\n        }\n        \n        else if(enumerations.length > 0){\n            // Handle enumerations\n            this.innerHTML = this.getHtmlEnumeration()\n        \n        } else if (this.krakenSchema?.expectedType?.htmlType == \"object\"){\n            this.innerHTML = this.getHtmlObject()\n\n        } else {\n            this.innerHTML = this.getHtmlSimple()\n        }\n    }\n\n\n    \n    \n\n\n    getHtmlSimple(){\n        return `\n        \n            <input type=\"${this.krakenSchema?.expectedType.htmlType}\" class=\"kr-value-item form-control\" id=\"exampleInputPassword1\" value=\"${this.value || \"\"}\"  >\n       `\n    }\n\n\n    getHtmlRecordType(){\n\n        let enumerations\n\n        let parentProperty = this.thing.closest('kr-property')\n        if (parentProperty){\n             enumerations = parentProperty.krakenSchema?.expectedTypes || []\n        \n        } else {\n\n             enumerations = KrakenSchemas.get(\"Thing\").record_types || []\n            \n        }\n\n        \n        \n        let enums = []\n\n        for (let e of enumerations){\n            enums.push(`<option value=\"${e}\">${e}</option>`)\n        }\n\n        let id = String(crypto.randomUUID())\n        return `\n        \n        <input class=\"kr-value-item form-control\" list=\"datalist_${id}\" aria-label=\"Default select example\" value=\"${this.value}\">\n              <datalist id=\"datalist_${id}\">\n             ${enums.join('')}\n                </datalist>\n            </input>\n          `\n\n    }\n\n\n\n    \n    getHtmlEnumeration(){\n\n        \n        let enumerations = this.krakenSchema.expectedType?.enumerationItems || []\n        let enums = []\n\n        for (let e of enumerations){\n            enums.push(`<option value=\"${e.name}\">${e.name}</option>`)\n        }\n\n        \n        return `\n       \n        <select class=\"kr-value-item form-select\" aria-label=\"Default select example\" value=\"${this.value}\">\n              <option selected></option>\n              ${enums.join('')}\n            </select>\n      `\n        \n    }\n\n\n    getHtmlObject(){\n       return  `\n       \n        <div class=\"ms-5\">\n            <kr-form-sm data-record-type=\"${this.krakenSchema.expectedType.record_id}\"></kr-form-sm></div>\n           `\n    }\n\n    \n    // -----------------------------------------------------\n    //  Custom Element Events \n    // -----------------------------------------------------\n\n    setEventListenerDrag(){\n\n        this.draggable=true\n        this.addEventListener('dragstart', event =>{\n            event.preventDefault()\n            event.dataTransfer.setData('text', JSON.stringify(this.record, null, 4))\n        })\n    }\n\n    setEventListenerValue(){\n\n        this.addEventListener('input', event =>{\n            \n            //this.replacePropertyValueAction(event.target.value, false)\n        })\n    }\n\n}\n\ncustomElements.define(\"kr-form-input-value\", KrFormInputValue);\n\n\n","\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrCardElement extends KrThingElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = template()\n\n\n        // \n        this._isSelected = false\n        \n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        await super.initObject()\n\n    }\n\n\n\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-card\", KrCardElement);","\nexport function template(){\n\n    return `\n\n\n        <div class=\"card mb-3 bg-transparent\" style=\"max-width: 300px;\">\n            <div class=\"row g-0\">\n\n\n\n                <div class=\"col col-sm-4 align-self-center\">\n                    <a href=\"#\" class=\"btn h-100\" data-bs-toggle=\"modal\" data-bs-target=\"#modalID\">\n                        <img src=\"{{item.image.contentUrl}}\" class=\"img-fluid rounded-start\" alt=\"...\" onerror='this.style.display = \"none\"'>\n                    </a>\n                </div>\n\n\n\n                <div class=\"col pt-0 col-sm-8 align-self-top\">\n                    <div class=\"row  mt-0 me-1\">\n                        <span\n                            class=\"mt-0 mb-1 align-self-end text-end justify-content-end kr-action\">{{kr-action}}</span>\n                    </div>\n                    <div class=\"card-body\">\n\n                        <div class=\"row align-self-center\">\n                            <h5 class=\"card-title\">\n                                <font size=\"-1\">{{item.name}}</font>\n                            </h5>\n                            <p class=\"card-text\">\n                                <font size=\"-1\">{{item.url}}</font>\n                            </p>\n\n                        </div>\n                    </div>\n\n\n                    {% for c in parent %}\n\n                        <div class=\"row me-1 mt-0 text-end justify-content-end\">\n                            <p class=\"card-text\"><small class=\"text-body-secondary\">\n                                    <font size=\"-1\">{{ c.name }}</font>\n                                </small></p>\n                        </div>\n\n                    {% endfor %}\n\n\n\n                    {% for c in children %}\n\n                        <div class=\"row me-1 mt-0 text-end justify-content-end\">\n                            <p class=\"card-text\"><small class=\"text-body-secondary\">\n                                    <font size=\"-1\">{{ c.name }}</font>\n                                </small></p>\n                        </div>\n\n                    {% endfor %}\n\n                </div>\n            </div>\n        </div>\n\n        <div class=\"modal fade\" id=\"modalID\" tabindex=\"-1\" aria-labelledby=\"modalIDLabel\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-xl\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">{{heading1}}</h1>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        {{ content }}\n                    </div>\n\n                </div>\n            </div>\n        </div>`\n}\n\n","\n\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrHeaderElement extends KrThingElement {\n    constructor() {\n        super();\n\n        // Set html template\n        this.htmlTemplate = template()\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        // Configuration prior to generation\n\n\n        // Generation\n        await super.initObject()\n\n\n        // Configuration after generation\n\n\n    }\n\n\n}\n\ncustomElements.define(\"kr-header\", KrHeaderElement);","\n\nexport function template(){\n\n    return `\n\n\n     \n\n    {% for part in item.hasPart %}\n       \n        {% if part['@type'] == \"WPHeader\" %}\n                {{ ok }}\n                <nav class=\"navbar navbar-expand-lg bg-dark border-bottom border-body\" data-bs-theme=\"dark\">\n            \n            \n                <div class=\"container col-xxl-8\">\n                    <a class=\"navbar-brand\" href=\"/\">{{ item.name }}</a>\n                    <button class=\"navbar-toggler\" \n                        type=\"button\" \n                        data-bs-toggle=\"collapse\" \n                        data-bs-target=\"#navbarNavAltMarkup\" \n                        aria-controls=\"navbarNavAltMarkup\" \n                        aria-expanded=\"false\" \n                        aria-label=\"Toggle navigation\"\n                    >\n                        <span class=\"navbar-toggler-icon\"></span>\n                    </button>\n                    \n                    <div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\n                        <div class=\"navbar-nav\">\n                            {% for headerPart in part.hasPart %} \n                                              \n                                <a class=\"nav-link\" href=\"{{ headerPart.url }}\">{{ headerPart.name }}</a>\n                \n                            {% endfor %}\n                        \n                        </div>\n                    </div>\n                </div>\n            </nav>\n\n        {% endif %}\n    {% endfor %}\n    \n`\n}","\n\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrFooterElement extends KrThingElement {\n    constructor() {\n        super();\n\n        // Set html template\n        this.htmlTemplate = template()\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        // Configuration prior to generation\n\n\n        // Generation\n        await super.initObject()\n\n\n        // Configuration after generation\n\n    }\n\n}\n\ncustomElements.define(\"kr-footer\", KrFooterElement);","\n\nexport function template(){\n\n\n    return `\n    \n    \n    {% for part in item.hasPart %}\n\n        {% if part['@type'] == \"WPFooter\" %}\n                    \n                \n            <div class=\"bg-dark \" data-bs-theme=\"dark\">\n                <div class=\"container col-xxl-8\">\n                    <footer \n                        class=\"row \n                        row-cols-1 \n                        row-cols-sm-2 \n                        row-cols-md-5 py-5 my-5 \n                        border-top\" \n                    >\n                   \n                        <div class=\"col mb-3\">\n                            <a href=\"/\" class=\"d-flex align-items-center mb-3 link-body-emphasis text-decoration-none\">\n                                <svg class=\"bi me-2\" width=\"40\" height=\"32\">\n                                    <use xlink:href=\"#bootstrap\"></use>\n                                </svg>\n                            </a>\n                            <p class=\"text-body-secondary\">© 2024</p>\n                        </div>\n                \n                        <div class=\"col mb-3\">\n                    \n                        </div>\n                \n                        <div class=\"col mb-3\">\n                         \n                        </div>\n                    \n                        <div class=\"col mb-3\">\n                          \n                        </div>\n                    \n                        <div class=\"col mb-3\">\n                            <h5>Section</h5>\n                            <ul class=\"nav flex-column\">\n                \n                                {% for footerPart in part.hasPart %} \n                                   \n                                    <li class=\"nav-item\">\n                                        <a class=\"nav-link\" href=\"{{ footerPart.url }}\">{{ footerPart.name }}</a>\n                                    </li>\n                                    \n                                {% endfor %}\n                              \n                            </ul>\n                        </div>\n                    </footer>\n                </div>\n            </div>\n\n\n        {% endif %}\n    {% endfor %}\n\n    `\n    \n}","\n\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrSidebarElement extends KrThingElement {\n    constructor() {\n        super();\n\n        // Set html template\n        this.htmlTemplate = template()\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        // Configuration prior to generation\n\n\n        // Generation\n        await super.initObject()\n\n\n        // Configuration after generation\n\n\n    }\n\n\n}\n\ncustomElements.define(\"kr-sidebar\", KrSidebarElement);","\n\n\nexport function template(){\n\n\n    return `\n    \n\n\n{% for part in item.hasPart %}\n\n    {% if part['@type'] == \"WPSidebar\" %}\n                                    \n        \n        <div class=\"d-flex flex-column flex-shrink-0 p-3 text-bg-dark\" style=\"width: 280px;\">\n        \n            <a href=\"/\" class=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none\">\n\n                <kr-image-xs data-record-type=\"{{ part['@type'] }}\" data-record-id=\"{{ part['@id'] }}\">\n                </kr-image-xs>\n               \n                \n                <span class=\"fs-4\">{{ part.name }}</span>\n            </a>\n            <hr>\n            <ul class=\"nav nav-pills flex-column mb-auto\">\n\n\n                {% for partSidebar in part['hasPart'] %}\n                    <li class=\"nav-item\">\n                        <a \n                            href=\"{{ partSidebar.url }}\" \n                            class=\"nav-link\" \n                            aria-current=\"page\"\n                        >\n                            <svg class=\"bi pe-none me-2\" width=\"16\" height=\"16\">\n                                <use xlink:href=\"#home\"></use>\n                            </svg>\n                          {{ partSidebar.name }}\n                        </a>\n                    </li>\n                {% endfor %}\n                \n            </ul>\n   \n          </div>\n        \n\n    {% endif %}\n{% endfor %}\n\n\n    \n    `\n}","\n\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrArticleContentElement extends KrThingElement {\n    constructor() {\n        super();\n\n        // Set html template\n        this.htmlTemplate = template()\n        this._level = null\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        // Configuration prior to generation\n        this.config.level = this.level\n\n        // Generation\n        await super.initObject()\n\n\n        // Configuration after generation\n\n\n    }\n\n    // -----------------------------------------------------\n    //  Other attributes \n    // -----------------------------------------------------\n\n    get level(){\n\n        if(this._level && this._level != null){\n            return this._level\n        }\n\n        if(!this._level || this._level == null){\n            let l = this.getAttribute('data-level')\n            if(l && l!= null){\n                this._level = Number(l)\n            }\n        }\n\n        if(!this._level || this._level == null){\n            return 1\n        }\n\n        return this._level\n        \n    }\n    \n\n}\n\ncustomElements.define(\"kr-article-content\", KrArticleContentElement);","\n\n\n\nexport function template(){\n\n\n    return `\n\n        {% assign nextLevel = config.level | plus: 1 %}\n\n        <div id=\"{{ item['@id'] }}\">\n\n            <div class=\"justify-content-center text-center\">\n                <kr-image-lg data-record-type=\"{{ item['@type'] }}\" data-record-id=\"{{ item['@id'] }}\"></kr-image-lg>\n            </div>\n            \n            <h{{ config.level }}>{{ item.headline }}</h{{ config.level }}>\n    \n            <p>{{ item.text }}</p>\n\n            {% if item.hasPart %}\n                {% for part in item.hasPart %}\n\n                    <kr-article-content \n                        data-level=\"{{ nextLevel }}\" \n                        data-record-type=\"{{ part['@type'] }}\"\n                        data-record-id=\"{{ part['@id'] }}\"\n                    >\n                    </kr-article-content>\n                \n                {% endfor %}\n            {% endif %}\n    \n    `\n}","\n\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrArticleToCElement extends KrThingElement {\n    constructor() {\n        super();\n\n        // Set html template\n        this.htmlTemplate = template()\n        this._level = null\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        // Configuration prior to generation\n        this.config.level = this.level\n\n        // Generation\n        await super.initObject()\n\n\n        // Configuration after generation\n\n\n    }\n\n    // -----------------------------------------------------\n    //  Other attributes \n    // -----------------------------------------------------\n\n    get level(){\n\n        if(this._level && this._level != null){\n            return this._level\n        }\n\n        if(!this._level || this._level == null){\n            let l = this.getAttribute('data-level')\n            if(l && l!= null){\n                this._level = Number(l)\n            }\n        }\n\n        if(!this._level || this._level == null){\n            return 1\n        }\n\n        return this._level\n\n    }\n\n\n}\n\ncustomElements.define(\"kr-article-toc\", KrArticleToCElement);","\n\n\n\n\nexport function template(){\n\n\n    return `\n    \n    <a class=\"nav-link p-0 txt-body-secondary\" href=\"#{{ item['@id'] }}\">\n        \n       <small> {{ item.headline }}</small>\n        \n    </a>\n    \n    \n        {% if item.hasPart %}\n            \n            {% for part in item.hasPart %}\n                <nav class=\"nav ms-4 nav-underline\">\n                    <kr-article-toc \n                        data-level=\"{{ nextLevel }}\" \n                        data-record-type=\"{{ part['@type'] }}\"\n                        data-record-id=\"{{ part['@id'] }}\"\n                    >\n                    </kr-article-toc>\n                </nav>\n            {% endfor %}\n            \n        {% endif %}\n\n    `\n}","\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\nimport { template } from './template/template.js'\n\n\nexport class KrArticleElement extends KrThingElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = template()\n\n\n        // \n        this._isSelected = false\n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        await super.initObject()\n\n    }\n\n\n\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-article\", KrArticleElement);","\n\nexport function template(){\n\n    return `\n    \n            <div class=\"row\" data-bs-spy=\"scroll\">\n                <div class=\"col col-12 col-md-10\">\n                    \n                    <div id=\"test1\">\n                    <kr-article-content></kr-article-content>\n                    </div>\n                </div>\n                <div class=\"col col-0 col-md-2\">\n                \n                    <div id=\"toc\" class=\"sticky-top mt-4\">\n                        <kr-article-toc></kr-article-toc>\n                        \n                    </div>\n                </div>\n            </div>\n            \n    `\n}","\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\n\nimport { KrThingsElement } from '../../baseElements/KrThingsElement/KrThingsElement.js'\n\n\n\nimport { template } from './template/template.js'\n\n\nexport class KrEditor extends KrThingsElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        //this.htmlTemplate = null; //template()\n        \n\n        // \n        this._isSelected = false\n\n        this._defaultElementTemplate = 'kr-editor-line'\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        this.elementTemplate = 'kr-editor-line'\n        await super.initObject()\n\n    }\n\n\n\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-editor\", KrEditor);","\n\n\nexport function template(){\n\n\n    return `\n    \n       \n    `\n    \n}","import { KrThingElement } from \"../../baseElements/KrThingElement/KrThingElement.js\";\n\nimport { KrThingsElement } from \"../../baseElements/KrThingsElement/KrThingsElement.js\";\n\nimport { template } from \"./template/template.js\";\n\nimport { extractFromText } from '../../extractFromText/extractFromText.js'\n\n\nvar CURSORPOSITION = null;\nvar ITEMPOSITION = null;\n\nexport class KrEditorLine extends KrThingElement {\n    constructor() {\n        super();\n\n        // Override template\n        this.htmlTemplate = template();\n\n        //\n        this._isSelected = false;\n        this._level = 0;\n        this._tabSpacing = 40;\n        this._oldRecord = null\n        this._oldValue = null\n        this._oldValueObjects = []\n\n        this._isInitialized = false\n        \n        \n    }\n\n    // -----------------------------------------------------\n    //  Init\n    // -----------------------------------------------------\n\n    async initObject() {\n        //\n        if (this._isInitialized == false){\n           \n            this.config.best = this.thing.getBestRecord()\n            this.classList.add(\"kr-editor-line\");\n            this._isInitialized = true\n            await super.initObject();\n            \n        }\n        \n        this.refreshElement();\n        this.setKeydownListeners();\n        this.startObserver();\n    }\n\n    refreshElement() {\n\n        if(!this.thing || this.thing == null) { return }\n\n        let level = this.thing.getProperty('level').value\n        //if(!level ){\n        //    this.thing.replaceProperty('level', null, 0)\n        //}\n\n        \n        if(this._oldRecord == this.thing?.getBestRecord()){\n            return \n        }\n        this._oldRecord = this.thing.getBestRecord()\n       \n        if (this.inputField) {\n            this.refreshAll()\n        }\n    }\n\n    // -----------------------------------------------------\n    //  Additional attributes\n    // -----------------------------------------------------\n\n    get listItemElement() {\n        return this.closest(\".kr-list-item\");\n    }\n\n    get inputField() {\n        return this.querySelector(\".kr-input-field\");\n    }\n\n    get text() {\n\n        let text = this.inputField.textContent;\n\n        if(text && text != null){\n            text = text.trim()\n        }\n        \n        return text;\n    }\n\n    set text(value) {\n      \n        this.thing.replaceProperty('text', null, value)\n        this.inputField.textContent = value;\n    }\n\n    get previousLine() {\n        return (\n            this.listItemElement?.previousItem?.querySelector(\n                \".kr-editor-line\",\n            ) || null\n        );\n    }\n\n    get nextLine() {\n        \n        return (\n            this.listItemElement?.nextItem?.querySelector(\n                \".kr-editor-line\",\n            ) || null\n        );\n    }\n\n    // -----------------------------------------------------\n    //  Attributes - elements\n    // -----------------------------------------------------\n\n    get propertyElement() {\n        return this.querySelector(\".kr-property-field\");\n    }\n\n    get valueElement() {\n        return this.querySelector(\".kr-value-field\");\n    }\n\n    get levelElement() {\n        return this.querySelector(\".kr-level-field\");\n    }\n\n    get linearThingsSection(){\n\n        return this.querySelector(\".kr-linear-things-section\");\n    }\n\n    \n    // -----------------------------------------------------\n    //  Focus\n    // -----------------------------------------------------\n\n    focusPreviousLine() {\n        let cursorPosition = this.cursorPosition;\n        if (this.previousLine) {\n            this.previousLine.setFocus()\n            this.previousLine.cursorPosition = cursorPosition;\n        }\n    }\n\n    focusNextLine() {\n        let cursorPosition = this.cursorPosition;\n        if (this.nextLine) {\n            this.nextLine.setFocus()\n            this.nextLine.cursorPosition = cursorPosition;\n        }\n    }\n\n    // -----------------------------------------------------\n    //  Line selection\n    // -----------------------------------------------------\n\n    get parentLine() {\n        let item = this;\n        while (item) {\n            if (item.level < this.level) {\n                return item;\n            }\n            item = item.previousLine;\n        }\n        return null;\n    }\n\n    get childrenLines() {\n        let childrenLines = [];\n\n        let item = this.nextLine;\n        while (item) {\n            if (item.level > this.level) {\n                if(item.level == this.level + 1){\n                    childrenLines.push(item);\n                }\n                item = item.nextLine;\n            } else {\n                return childrenLines;\n            }\n        }\n        return childrenLines;\n    }\n\n    // -----------------------------------------------------\n    //  Level\n    // -----------------------------------------------------\n\n    get level() {\n        let level = this.thing.getProperty(\"level\").value || 0;\n    \n        return level\n    }\n\n    set level(value) {\n\n        if(this.level == value){ return }\n        this.thing.replaceProperty(\"level\", null, value);\n        this.style.paddingLeft = String(value * this._tabSpacing) + \"px\";\n    }\n\n    incrementLevel() {\n        \n        let childrenLines = this.childrenLines;\n        \n        if (this.previousLine && this.level <= this.previousLine.level) {\n            this.level = this.level + 1;\n            if(childrenLines && childrenLines != null){\n                for (let c of childrenLines) {\n                    \n                    c.incrementLevel();\n                }\n            }\n        }\n        this.refreshElement()\n    }\n\n    decrementLevel() {\n        let childrenLines = this.childrenLines;\n        if (this.level > 0) {\n            this.level = this.level - 1;\n            if(childrenLines && childrenLines != null){\n                for (let c of childrenLines) {\n                    c.decrementLevel();\n                }\n            }\n        }\n        this.refreshElement()\n    }\n    // -----------------------------------------------------\n    //  cusrsor position\n    // -----------------------------------------------------\n    get cursorPosition() {\n        const selection = window.getSelection();\n        const range = selection.getRangeAt(0);\n        const clonedRange = range.cloneRange();\n        clonedRange.selectNodeContents(this.inputField);\n        clonedRange.setEnd(range.endContainer, range.endOffset);\n\n        const cursorPosition = clonedRange.toString().length;\n\n        CURSORPOSITION = cursorPosition;\n        return cursorPosition;\n    }\n\n    set cursorPosition(value) {\n        if (this.inputField.childNodes.length == 0) {\n            value = 0;\n        } else if (this.inputField.childNodes[0] == null) {\n            value = 0;\n        } else if (this.inputField.childNodes[0].length < value) {\n            value = this.inputField.childNodes[0].length;\n        }\n\n        if (value == -1) {\n            value = this.inputField.childNodes[0].length;\n        }\n\n        if (value > 0) {\n            var selectedText = window.getSelection();\n            var selectedRange = document.createRange();\n            selectedRange.setStart(this.inputField.childNodes[0], value);\n            selectedRange.collapse(true);\n            selectedText.removeAllRanges();\n            selectedText.addRange(selectedRange);\n        }\n        this.inputField.focus();\n    }\n\n    setFocus() {\n        this.inputField.focus();\n    }\n\n    // -----------------------------------------------------\n    //  Content manipulation\n    // -----------------------------------------------------\n\n    processContentChange() {\n\n\n        \n        let text = this.text\n        if(this.thing.getProperty('text').value == this.text){ return }\n\n        // Handle json\n\n        let isJson = false\n        if(text.startsWith('[') || text.startsWith('{')){\n            isJson = this.processJson(text)\n        } else {\n        }\n\n        \n        \n        this.thing.replaceProperty('text', null, this.text)\n        this.refreshProperty();\n        this.refreshValue();\n        this.refreshLinearThing()\n    }\n\n\n    processJson(text){\n        \n        try{\n            let jsonContent = JSON.parse(text)\n            jsonContent = ensureArray(jsonContent)\n\n            let level = this.level\n            if(!level || level == null){ level = 0 }\n            \n            let line = this\n            for(let record of jsonContent){\n\n                for(let k of Object.keys(record)){\n                    let content = k + ': ' + record[k]\n                    line = line.addLine(content, level + 1)\n                }\n            }\n            return true\n        } catch(error) {\n            return false\n        }\n        \n    }\n\n\n    \n    refreshAll() {\n        //this.refreshLineno();\n        this.refreshProperty();\n        this.refreshValue();\n        this.refreshLevel();\n        this.refreshLinearThing()\n    }\n\n    refreshLineno() {\n        if (this.linenoElement.textContent != String(this.lineno)) {\n            this.linenoElement.textContent = String(this.lineno);\n            if (this.nextElementSibling) {\n                this.nextElementSibling.lineno;\n            }\n        }\n    }\n\n    refreshProperty() {\n        this.propertyElement.textContent = this.property;\n    }\n\n    refreshValue() {\n        this.valueElement.textContent = this.value;\n        \n    }\n\n    refreshLevel() {\n        let level = this.thing.getProperty('level').value || 0\n        this.level = level\n        this.levelElement.textContent = level\n    }\n\n    refreshLinearThing(){\n\n        \n        let section = this.linearThingsSection\n\n        if(!section || section == null){\n            return\n        }\n\n        \n        //section.innerHTML = null\n\n        let values = this.valueObjects\n        if(!values || values == null){ return }\n\n        /*\n        for(let v of values){\n            let newElement = document.createElement('kr-linear-thing')\n            \n            \n            section.appendChild(newElement)\n            newElement.thing = v\n            newElement.refreshElement()\n        }\n        */\n    }\n\n    get property(){\n\n          if(this.text && this.text != null && this.text.includes(':')){\n               return this.text.split(':')[0] \n          }\n\n          if(this.parentLine){\n               return this.parentLine.property\n          }\n\n          if(this._isHeadline){\n               return 'headline'\n          }\n\n          return 'text'\n\n     }\n\n     get isProperty(){\n          // returns true if property field\n\n          if(this.text.endsWith(':')){\n               return true\n          }\n          return false\n\n     }\n\n     get value(){\n\n         let text = this.text\n         \n         if(!text || text == null) { return null }\n\n         \n         if(!text.includes(':')){ return text }\n\n         let parts = text.split(':')\n\n         if(parts.length > 1 ){\n             return parts[1]\n         }\n\n         return null\n         \n           \n     }\n\n    get valueObjects(){\n\n        if(this.text == this._oldValue) { return this._oldValueObjects }\n\n        this._oldValue = this.text\n        let value = extractFromText(this.text)\n        \n        this._oldValueObjects = value\n        this.thing.replaceProperty('hasPart', null, value)\n\n\n        \n        return this._oldValueObjects\n        \n     }\n    \n\n     get isValue(){\n\n          if(this.text.endsWith(':')){\n               return false\n          } else {\n               return true\n          }\n\n     }\n\n    \n\n    // -----------------------------------------------------\n    //  Line manipulation\n    // -----------------------------------------------------\n\n    async addLine(content, level = 0) {\n        let record = {\n            \"@type\": \"DigitalDocument\",\n            \"@id\": String(crypto.randomUUID()),\n            text: content,\n            name: content,\n            level: level,\n        };\n\n        let newItem = await this.listItemElement.thingElement.insertAfterItemElement(\n                this.listItemElement,\n                record\n            );\n\n        let newLine = newItem.querySelector('.kr-editor-line')\n        \n        return newLine\n\n        \n       //return itemElement\n\n    }\n\n    async splitLine(cursorPosition = null) {\n        if (cursorPosition == null) {\n                cursorPosition = this.cursorPosition;\n        }\n\n        // Deal with items\n\n        if (this.text && this.text.startsWith(\"-\")) {\n            let nextLevel = this.level;\n            if (\n                this.previousElementSibling &&\n                this.previousElementSibling.level <= this.level\n            ) {\n                this.incrementLevel();\n            }\n\n            let newLine2;\n\n            let newLine1 = this.addLine(this.text.substring(1), this.level + 1);\n\n            if (\n                newLine1.text &&\n                newLine1.text.length > 0 &&\n                newLine1.text != \" \"\n            ) {\n                newLine2 = newLine1.splitLine(cursorPosition - 1);\n            } else {\n                newLine2 = newLine1;\n            }\n\n            this.text = \"-\";\n\n            return newLine2;\n        }\n\n        \n        \n        let leftContent = this.text?.substring(0, cursorPosition) || null;\n        \n        let rightContent = this.text?.substring(cursorPosition) || null;\n\n\n        this.text = leftContent;\n\n\n        let newLevel = this.level;\n        if (this.text && this.text.endsWith(\":\")) {\n            newLevel = newLevel + 1;\n        }\n\n        \n        let newLine = await this.addLine(rightContent, newLevel)\n      \n\n        newLine.setFocus()\n        return newLine\n            \n        \n\n       \n    }\n\n    mergeLine() {\n        if (!this.previousElementSibling) {\n            return;\n        }\n\n        let position = this.previousElementSibling.text.length;\n\n        if (this.text) {\n            this.previousElementSibling.text += \" \" + this.text;\n        }\n\n        this.previousElementSibling.cursorPosition = position + 1;\n\n        let nextElement = this.nextElementSibling;\n        this.remove();\n        nextElement.lineno;\n    }\n\n    // -----------------------------------------------------\n    //  Content observer\n    // -----------------------------------------------------\n\n    startObserver() {\n        var target = this.inputField;\n\n        // create an observer instance\n        let element = this;\n        var observer = new MutationObserver(function (mutations) {\n            mutations.forEach(function (mutation) {\n                if (mutation.type == \"characterData\") {\n                    debounce(element.processContentChange());\n                }\n            });\n        });\n\n        // configuration of the observer:\n        var config = {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true,\n        };\n\n        // pass in the target node, as well as the observer options\n        observer.observe(this, config);\n    }\n\n    // -----------------------------------------------------\n    //  Content listener\n    // -----------------------------------------------------\n\n    setKeydownListeners() {\n        this.addEventListener(\"keydown\", (event) => {\n\n            \n            if (event.key == \"Enter\") {\n                event.preventDefault();\n                event.stopPropagation();\n                debounce_leading(this.splitLine())\n                this.focusNextLine();\n                \n            }\n\n            if (event.key == \"ArrowUp\") {\n                event.preventDefault();\n                event.stopPropagation();\n                this.focusPreviousLine();\n            }\n\n            if (event.key == \"ArrowDown\") {\n                event.preventDefault();\n                event.stopPropagation();\n                this.focusNextLine();\n            }\n\n            if (event.ctrlKey == true && event.key == \"ArrowRight\") {\n                event.preventDefault();\n                event.stopPropagation();\n                this.cursorPosition(-1);\n            }\n\n            if (event.ctrlKey == true && event.key == \"ArrowLeft\") {\n                event.preventDefault();\n                event.stopPropagation();\n                this.cursorPosition(0);\n            }\n\n            if (event.shiftKey == false && event.key == \"Tab\") {\n                event.preventDefault();\n                event.stopPropagation();\n                debounce_leading(this.incrementLevel());\n            }\n            if (event.shiftKey == true && event.key == \"Tab\") {\n                event.preventDefault();\n                event.stopPropagation();\n                debounce_leading(this.decrementLevel());\n            }\n\n            if (event.key == \"Backspace\" && this.cursorPosition == 0) {\n                event.preventDefault();\n                event.stopPropagation();\n                debounce_leading(this.mergeLine());\n            }\n\n            if (event.ctrlKey == true && event.key == \"b\") {\n                event.preventDefault();\n                event.stopPropagation();\n                this.toggleHeadline();\n               \n            }\n\n            \n        });\n    }\n}\n\ncustomElements.define(\"kr-editor-line\", KrEditorLine);\n\nfunction createRange(node, chars, range) {\n    if (!range) {\n        range = document.createRange();\n        range.selectNode(node);\n        range.setStart(node, 0);\n    }\n\n    if (chars.count === 0) {\n        range.setEnd(node, chars.count);\n    } else if (node && chars.count > 0) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            if (node.textContent.length < chars.count) {\n                chars.count -= node.textContent.length;\n            } else {\n                range.setEnd(node, chars.count);\n                chars.count = 0;\n            }\n        } else {\n            for (var lp = 0; lp < node.childNodes.length; lp++) {\n                range = createRange(node.childNodes[lp], chars, range);\n\n                if (chars.count === 0) {\n                    break;\n                }\n            }\n        }\n    }\n\n    return range;\n}\n\nfunction isChildOf(node, parentId) {\n    while (node !== null) {\n        if (node.id === parentId) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n\n    return false;\n}\n\nfunction getCurrentCursorPosition(parentId) {\n    var selection = window.getSelection(),\n        charCount = -1,\n        node;\n\n    if (selection.focusNode) {\n        if (isChildOf(selection.focusNode, parentId)) {\n            node = selection.focusNode;\n            charCount = selection.focusOffset;\n\n            while (node) {\n                if (node.id === parentId) {\n                    break;\n                }\n\n                if (node.previousSibling) {\n                    node = node.previousSibling;\n                    charCount += node.textContent.length;\n                } else {\n                    node = node.parentNode;\n                    if (node === null) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    return charCount;\n}\n\nfunction getDirectChilds(element, className) {\n    // returns direct childs, not grandchilds\n    let results = [];\n\n    for (let child of element.children) {\n        if (child.classList && child.classList.contains(className)) {\n            results.push(child);\n        } else {\n            results = results.concat(getDirectChilds(child, className));\n        }\n    }\n    return results;\n}\n\nfunction debounce(func, timeout = 300) {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            func.apply(this, args);\n        }, timeout);\n    };\n}\n\nfunction debounce_leading(func, timeout = 300){\n  let timer;\n  return (...args) => {\n    if (!timer) {\n      func.apply(this, args);\n    }\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      timer = undefined;\n    }, timeout);\n  };\n}\n\n\n\n\nfunction ensureArray(value) {\n    if (Array.isArray(value)) {\n        return value;\n    } else {\n        return [value];\n    }\n}\n\n\n\nfunction waitForElement(condition, callback) {\n    let result = condition\n  if (result && result != null ) {\n    callback();\n  } else {\n    setTimeout(() => waitForElement(selector, callback), 500);\n  }\n}","\n\n\n\nexport function template(){\n\n    return `\n    \n        <div class=\"row\">\n                   \n            \n            <div class=\"col\">\n\n                    <div class=\"kr-input-field\" contenteditable=\"true\">\n                        {{ config.best.text }}\n                    </div>\n\n                <kr-property data-property-id=\"hasPart\">\n\n                </kr-property>\n                    <div class=\"kr-linear-things-section\">\n                    </div class=\"kr-linear-things-section\">\n                      \n                \n            </div>\n                  \n            <div class=\"col col-1\">\n                <div class=\"kr-property-field border\">\n                </div>\n            </div>\n            \n            <div class=\"col col-1\">\n                <div class=\"kr-value-field border\">\n                </div>\n            </div>\n\n            <div class=\"col col-1\">\n                <div class=\"kr-level-field border\">\n                {{ config.best.level }}\n                </div>\n            </div>\n                \n           \n        </div>\n                  \n                  `\n}","\n//import { krakenschema } from 'krakenschema'\n\n    \nexport function extractFromText(content){\n\n    let values = []\n    \n    if(!content || content == null || content == \"\"){\n        return null\n    }\n\n    // Extract json from entire content\n    if(content.startsWith('{') || content.startsWith('[')){\n        values = values.concat(extractJSON(content))\n        return values\n    }\n\n\n    \n    let key = getKey(content)\n\n    let rawValue = getValue(content)\n    values = values.concat(extractAction(rawValue))\n\n    // Extract json from rawValue\n    values = values.concat(extractJSON(rawValue))\n\n    if(values.length > 0){\n        return values\n    } else {\n        return []\n    }\n\n    \n}\n\n\nfunction getKey(content){\n\n    if(!content.includes(':')){ return null }\n    \n    let key = content.split(':')[0]\n\n    return key\n    \n}\n\n\n\nfunction getValue(content){\n\n    if(!content.includes(':')){ return content }\n\n    let parts = content.split(':')\n\n    if (parts.length < 2){ return null }\n\n    let value = parts[1]\n\n    return value\n\n}\n\n\nfunction extractAction(content){\n\n    let rawContent = content.trim()\n\n    if(!rawContent || rawContent == null){ return }\n\n    \n    if(!rawContent.startsWith('*')){ return [] }\n\n    rawContent = rawContent.slice(1)\n\n    \n    let agents = extractMentions(content)\n\n    let name = rawContent.split('@')[0]\n    \n    let record = {\n        \"@type\": \"Action\",\n        \"@id\": String(crypto.randomUUID()),\n        \"name\": name,\n        \"agent\": agents,\n        \"actionStatus\": \"ActiveActionStatus\"\n    }\n\n    return [record]\n\n    \n}\n\nfunction extractMentions(content){\n\n    let results = []\n    \n    let rawContent = content.trim()\n\n    if(!rawContent || rawContent == null){ return }\n\n    // Add space after non standard characters\n    let nonStandardCharacters = ['(', ')', ',']\n    for (let n of nonStandardCharacters){\n        rawContent = rawContent.replace(n, n + ' ')\n    }\n   \n    let parts = rawContent.split(' ')\n\n    for(let part of parts){\n\n        if(part.startsWith('@')){\n\n            let record =  {\n                \"@type\": \"Person\",\n                \"@id\": part,\n                \"name\": part\n            }\n            results.push(record)\n        }\n        \n    }\n    return results\n    \n}\n\n\nfunction extractJSON(content){\n\n    let results = []\n\n\n    let rawContent = content.trim()\n\n    try{\n        let jsonContent = JSON.parse(rawContent)\n        jsonContent = ensureArray(jsonContent)\n        results = results.concat(jsonContent)\n       \n    } catch(error) {\n        //console.error('error', rawContent, error)\n    }\n    return results\n    \n}\n\n\n\n\nfunction ensureArray(value) {\n    if (Array.isArray(value)) {\n        return value;\n    } else {\n        return [value];\n    }\n}","\nimport { KrThingElement } from '../../baseElements/KrThingElement/KrThingElement.js'\n\n\nimport { KrThingsElement } from '../../baseElements/KrThingsElement/KrThingsElement.js'\n\n\n\nimport { template } from './template/template.js'\n\n\nexport class KrLinearThing extends KrThingElement {\n    constructor() {\n        super();\n\n\n        // Override template\n        this.htmlTemplate = template()\n        this._oldRecord = null\n\n        // \n        this._isSelected = false\n\n\n    }\n\n\n    // -----------------------------------------------------\n    //  Init \n    // -----------------------------------------------------\n\n    async initObject() {\n\n        //\n        console.log('br', this.thing.record_type)\n        this.config.best = this.thing.getBestRecord()\n        await super.initObject()\n\n    }\n\n\n    refreshElement(){\n\n        \n        let bestRecord = this.thing.getBestRecord()\n\n        console.log('br', this.thing.record_type)\n        if(bestRecord == this._oldRecord){ \n            console.log('is equal')\n                return }\n\n        this._oldrecord = bestRecord\n        this.initObject()\n        \n        \n    }\n\n\n\n\n\n}\n\ncustomElements.define(\"kr-linear-thing\", KrLinearThing);","\nexport function template(){\n\n\n    return `\n\n\n\n        <div class=\"\">\n\n            {{ config.best['@type'] }}\n            {% if config.best['@type'] == \"Action\" %}\n\n                <kr-action-status></kr-action-status> {{ config.best.name }} {{ config.best.agent.name }}\n\n          \n\n            {% elsif config.best['@type'] == \"Person\" %}\n            \n                <kr-image-sm></kr-image-sm> {{ config.best.name }} {{ config.best.givenName }} {{ config.best.familyName }} \n            \n            {% else %}\n\n                {{ config.best.text }}\n                \n            {% endif %}\n\n           \n        </div>\n\n        \n\n    `\n\n}","import { KrThingElement } from \"../../baseElements/KrThingElement/KrThingElement.js\";\n\nimport { template } from \"./template/template.js\";\n\nexport class KrSimple extends KrThingElement {\n    constructor() {\n        super();\n\n        // Override template\n        this.htmlTemplate = template();\n\n        this._keys = null;\n        this._headers = null;\n\n        //\n        this._isSelected = false;\n    }\n\n   \n}\n\ncustomElements.define(\"kr-simple\", KrSimple);\n","\n\n\nexport function template(){\n\n\n    return `\n    {% for i in item %}\n        <div class=\"row\">\n            <div class=\"col col-3\">\n                <b>{{i[0]}}</b>\n            </div>\n            <div class=\"col col-9\">\n                 <kr-property data-property-id=\"{{ i[0] }}\" data-value-template=\"kr-simple\">\n            </kr-property>\n            </div>\n        </div>      \n    {% endfor %}\n    <br>\n    `\n    \n}"],"names":[],"version":3,"file":"main.js.map"}